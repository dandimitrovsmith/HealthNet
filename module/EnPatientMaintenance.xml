<?xml version="1.0" encoding="utf-8"?>
<!-- XML for Views version 1.0-->
<!--lastEditDate="2014-SEPT-17"-->
<!--lastEditBy="Kiko Taganashi"-->
<!-- Filter Operatives
To filter a string value,use = or !
For filter number values you can use the following:
 
!  not equal
=  equal
«  less than
»  more than
≤  less than equal
≥  more than equal -->

<module name="Patient Management">
  <section type="tab" title="Patients"	>
    <group type="heading" name="patientbar1" showif="edit">
      <row>
        <control type="group" span="7">
        <control tanslate="true" type="header" >Nombre del Paciente:</control>
        <control type="header" name="PatientFirstName" persist="true" />
        <control type="header" name="PatientMiddleName" persist="true" />
        <control type="header" name="PatientLastName" persist="true" />
        </control>
        <control type="group" align="right" span="5">
        <control type="header" >Expediente:</control>
        <control type="header" name="MedicalRecordNumber" persist="true" />
        </control>
      </row>
    </group>
    <group type="controlset">
      <row>        
                 
        <control type="choose" name="searchselect" span="4" align="left"
          placeholder="Haga clic para Search paciente...."
          mode="basic"
          source="PatientFullName,RecordUniqueId"
          datasource="GetPatientNamesMatchingByFacility"
          term="nameToSearch"
          datarequest="GetPatientAllFields"
          appendrequest="PatientId=[searchselect]"
          inject="patientInfo,patientbar1,patientbar2,visitcontrolbar"
          action="allnew"          
          provoke="PatientAddresses,PrimaryPayorCountry,PatientButtonGroupSelect,visitselect"/>        
                 
        <control type="button" span="2" name="PatientSave"
          compare="[searchselect]!|Primero selecciona un paciente"          
          tooltip="Click to save your patient changes."	 
          action="save" label="Save"	 translate="true"
          icon="cloud-upload" 
          capture="patientInfo"
          datainsert="InsertPatient"
          dataupdate="UpdatePatient"
          affector="searchselect"
          setaffector="RecordUniqueId"
          appendrequest="patientId=[searchselect]"
          appendupdate="patientId=[searchselect]"/>

        <control name="btnVisits" type="button" 
          compare="[searchselect]!|Primero selecciona un paciente"          
          action="redirect" 
          span="1" icon="search" label="Visits"	                          
          target="PatientVisits"/>  

       <control type="header" align="right" span="3">Guarantor Information</control>      
       <control type="buttongroup" name="GuarantorShow"           
          span="2" 
          sourcelabels="Show,Hide"	 source="True,False"            
          default="False" edit="searchselect!" />

      </row>
    </group>    

    <!--  enteredby="EnteredByFullName" updatedby="LastUpdatedByFullName" 
      dtentered="PatientCreateDate" dtupdated="DateTimeLastModified" -->

    <!-- datasource should be changed to GetMaritalStatusBy Facility-->  
    <!-- datasource should be changed to GetReligionsByFacility-->
    <!-- datasource should be changed to GetLanguagesByFacility -->
    
    <group name="patientInfo">
     <subset>      
      <row> 
        <control type="label" label="Name"	 span="1"/>       
        <control type="text" name="patientInfo_PatientFirstName" span="3" required="true" edit="true"  offset="2" placeholder="Nombre"/>
        <control type="text" name="patientInfo_PatientMiddleName" span="3" edit="true"   placeholder="Apellido Paterno"/>
        <control type="text" name="patientInfo_PatientLastName" span="3" required="true" edit="true"  placeholder="Apellido Materno"/>           
      </row>          
      
      <row>       
        <control type="label" label="Birth Date" span="1" />
        <control type="date" name="PatientDOB" span="2" required="true" edit="true"  compare="«now"/>
        <control type="label" label="Sex"	 span="1" />
        <control type="select" name="PatientSex" span="2" required="true" edit="true" 
                 sourcelables="Femenino,Masculino,Indeterminado"
                 source="Female,Male,Indeterminate"/>
        <control type="label" label="Marital Status"	 span="1"/>
        <control type="select" name="PtMaritalStatus" span="2" sourcelabels="Single,Married,Divorced,Widowed,Unknown"	 
          source="Single,Married,Divorced,Widowed,Unknown" edit="true" />
        <control type="label" label="Religion"	 span="1" />
        <control type="select" name="Religion" span="2"
          source="ConceptName,Code"
          datasource="GetLookupReligionsActive" edit="true" />  
      </row> 

      <row>
        <control type="hidden" label="Gestation"	 span="2" badge="Weeks"/>
        <control type="hidden" name="GestationAge" span="2" edit="true" />
        <control type="hidden" label="Birth Weight"	 span="2" badge="g"/>
        <control type="hidden" name="BirthWeight" format="0,00.00" span="2" edit="true" />
        <control type="hidden" label="Time of Birth"	 span="2"/>
        <control type="hidden" name="TimeOfBirth" span="2" edit="true" />
      </row>      
    
      <row>
        <control type="label" label="Place of Birth"	 span="1"/>
        <control type="text" name="BirthPlace" span="2" edit="true" />
        <control type="label" label="Birth ID"		 span="1"/>
        <control type="text" name="PtSSN" span="2" edit="true" />
        <control type="label" label="Nationality"	 span="1" />
        <control type="select" name="Nationality" span="2" 
          source="Country,Code"
          datasource="GetCountries" edit="true" />
        <control type="label" label="Language"	 span="1" />
        <control type="select" name="LanguageSpoken" span="2" 
          source="Language,Code" default="(facilityData.DefaultLanguage)"
          datasource="GetLookupLanguageSpokenActive" edit="true" /> 
      </row>     
     
      <row>
        <control type="label" label="Terms"	 span="1" />
        <control type="select" name="CreditTerms" span="2" 
          source="Charity,Cash Only,Deposit Required,Credit Limit,HMO Covered" sourcelabels="Charity,Cash,Deposit Required,Credit Limit,HMO Covered"	
          edit="true" />
        <control type="label" label="Credit"	 span="1" />
        <control type="text" name="CreditLimit" span="2" edit="true" default="0" format="0,000"/>
        <control type="label" label="End Class"	 span="1" />
        <control type="select" name="FinancialClass" span="2"
          datasource="GetLookupFinancialClassificationsActive" 
          source="ClassificationCode,ClassificationGuid" 
          sort="ClassificationCode"       
          acctsvc="true" 
          acctsvcreq="true"          
          edit="true" 
          />   
        <control type="label" label="Revise"	 span="1" />
        <control type="date" name="FinancialClassExpiryDate" span="2" edit="true" /> 
      </row>

      <row> 
        <control type="label" label="Account"	 span="1" />
        <control type="text" name="AccountNumber" span="2" edit="true"  />      
        <control type="label" label="Balance"		 span="1" /> 
        <control type="text" name="PatientAccountBalance" span="2" readonly="true" default="0.00" format="0,000.00"/>  
         <control type="hidden" 
           span="2" 
           name="AuditBalance"
           action="print" 
           mode="report" 
           label="Audit Balance"	 
           icon="print" 
           append="id=4ef67021de0,FacilityId=(facility),PatientId=[searchselect],UserName=(fullname)"/>             
        <control type="hidden"            
           align="left"
           span="2" 
           dependent="visitselect"
           name="PrintStatement"
           action="print" 
           mode="report" 
           label="Account Statement"		 
           icon="print" 
           append="id=152122-4513,FacilityId=(facility),PatientVisit=[visitselect],UserName=(fullname),CurrentDateTime=(dateTimeNow)"/>    
        <control type="label" label="Discount"			 span="1" /> 
        <control type="select" name="DiscountType" span="2"
          acctsvc="true" acctsvcreq="true"
          source="Description,RuleGuid"
          datasource="GetDiscountRulesActive"
          edit="true" />               
      </row>     

       <row> 
        <control type="label" label="Email"			 span="1" />
        <control type="text" name="PatientEmail" span="5" edit="true" />        
      </row>
      
      <row>
        <control type="hidden" label="Housing Arrangement"	 span="2" />
        <control type="hidden" name="LivingArrangement" span="4"
          datasource="GetLookupLivingArrangementsActive" 
          source="LivingArrangement,Code" 
          sort="LivingArrangement"       
          edit="true" />      
      </row>     
      
      <row>
        <control type="hidden" label="Date/Time of Death"	 span="2"/>
        <control type="hidden" name="DateTimeOfDeath" span="4" edit="true" />
      </row>
     </subset>

     <subset name="GuarantorSection" reveal="GuarantorShow=True">
      <row divider="true">
        <control type="label" align="left" span="2" label="Guarantor Information"	/>  
      </row>

      <row>        
        <control type="label" span="1" label="Relationship"	/>        
        <control type="select" tooltip="Patient's relationship to the Insured."	 name="PrimaryPayorRelationship" span = "3" sourcelabels="Myself,Aunt,Brother,Daughter,Father,Second cousin,First cousin,Friend,Great-aunt,Great-grandfather,Great-grandmother,Great-uncle,Guardian,Second cousin,Maternal grandfather,Maternal grandmother,Mother,Paternal grandfather ,Paternal grandmother,Sister,Son,Spouse,Uncle " source="Self,Aunt,Brother,Daughter,Father,Female 2nd Cousin,Female First Cousin,Friend,Great-Aunt,Great-Grandfather,Great-Grandmother,Great-Uncle,Guardian,Male 2nd Cousin,Male First Cousin,Maternal Grandfather,Maternal Grandmother,Mother,Paternal Grandfather,Paternal Grandmother,Sister,Son,Spouse,Uncle" edit="true" />       
      </row>

       <row>        
        <control type="label" label="Name"	 span ="1"/>
        <control type="text" name="PrimaryPayorFirstName" span="3" edit="true" />        
        <control type="label" label="Parent"	 span ="1"/>
        <control type="text" name="PrimaryPayorMiddleName" span="3" edit="true" />
        <control type="label" label="Maternal"	 span ="1"/>
        <control type="text" name="PrimaryPayorLastName" span="3" edit="true" />
      </row>

       <row>        
        <control type="label" label="Address 1"	 span ="1"/>
        <control type="text" name="PrimaryPayorAddLineOne" span="3" edit="true" />
        <control type="label" label="Address 2"	 span ="1"/>
        <control type="text" name="PrimaryPayorAddLineTwo" span="3" edit="true" /> 
        <control type="label" label="City"	 span ="1"/>
        <control type="text" name="PrimaryPayorCity" span="3" edit="true" />       
        </row>
       
       <row>   
        <control type="label" label="Postal Code"	 span ="1"/>
        <control type="text" name="PrimaryPayorZipCode" span="3" edit="true" />     
        <control type="label" label="Country"	 span ="1"/>
        <control type="select" name="Country,PrimaryPayorCountry" span="3" edit="true" default="(facilityData.HospitalCountry)"
          datasource="GetCountries" 
          source="Country,Code"
          provoke="PrimaryPayorState"/>
        <control type="label" label="State"	 span ="1"/>
        <control type="select" name="PrimaryPayorState" span="3" edit="true"
          datasource="GetStatesProvincesByCountryCode"
          source="Name,Code" explicit="true"
          append="countryCode=[PrimaryPayorCountry]"/>
       </row>

        <row>        
         <control type="label" label="Phone"	 span ="1"/>
         <control type="text" name="PrimaryPayorPhone" span="3" edit="true" />
         <control type="label" label="Birth ID"		 span ="1"/>
         <control type="text" name="PrimaryPayorSocialSecurity" span="3" edit="true" /> 
         <control type="label" label="Date of Birth"	 span="1" />
         <control type="date" name="PrimaryPayorDOB" span="2" edit="true" />       
        </row>

        <row>        
         <control type="label" label="Employee"	 span ="1"/>
         <control type="text" name="PrimaryPayorEmployer" span="3" edit="true" />
         <control type="label" label="Employee Phone"	 span ="2"/>
         <control type="text" name="PrimaryPayorEmployerPhone" span="2" edit="true" />          
        </row>        
    </subset> 
    
    <subset>
      <row divider="true">        
      </row> 
    </subset>  
    </group>
  
    <group name="PatientGridList"> 
       <row>
         <control type="buttongroup" 
          name="PatientButtonGroupSelect" 
          edit="searchselect!" 
          source="Addresses,IDandPhones,Contacts,Employers,Payers"           
          sourcelabels="Addresses,ID and Phone,Contacts,Employees,Payers"	 
          span="12" 
          default="Addresses" 
                      
          provoke="gridListPatient,PatientAddresses,PatientIdentification,PatientPhones,PatientContacts,PatientEmployers,PatientPayers"/>          
      </row>

      <row>
       <control name="gridListPatient" affector="PatientButtonGroupSelect" type="options" span="12">        
         
        <control type="datagrid" 
          label="Address"	 
          name="PatientAddresses"
          option="Addresses"    
          span="12" 
          rows="7"     
          modalname="NewAddress"
          idle="[searchselect]="          
          datarequest="GetPatientAddresses"
          datainsert="InsertPatientAddress"
          dataupdate="UpdatePatientAddress"
          appendrequest="patientId=[searchselect]"         
          appendinsert="patientId=[searchselect],state=[NewAddress_Province]"
          appendupdate="patientId=[searchselect],state=[NewAddress_Province]"
          source="Active,Selected,AddressType,StreetAddressLine1,StreetAddressLine2,City,Barangay,ProvinceText,PostalCode,Country"
          sourcelabels="Active,Primary,Type,Address 1,Address 2,Commune,Province,Country,Postal Code,Country"	 
          translate="AddressType"
          key="AddressGuid" 
          align="||left|left|left|left|left|left|left|left|"
          format="boolean|primary"
          provoke="NewAddress_CountryCode"/>
                      
        <control type="datagrid" 
          label="Identification"	 
          name="PatientIdentification" 
          option="IDandPhones" 
          span="6"   
          rows="3"     
          modalname="NewIdentification"   
          idle="[searchselect]="        
          datarequest="GetPatientIdentificationRecords"
          datainsert="InsertPatientIdentificationRecord"
          dataupdate="UpdatePatientIdentificationRecord"
          appendrequest="patientId=[searchselect]"          
          appendinsert="patientId=[searchselect]"
          appendupdate="patientId=[searchselect]"
          source="Active,IdType,IdNumber"
          sourcelabels="Active,Type,Identification"	
          align="|left|left|"
          format="boolean|tcase"
          key="IdGuid"/>
                        
        <control type="datagrid" 
          label="Phones"	 
          name="PatientPhones"
          option="IDandPhones"  
          span="6" 
          rows="3"       
          modalname="NewPatientPhone" 
          idle="[searchselect]="
          datarequest="GetPatientPhoneNumbers"
          datainsert="InsertPatientPhoneNumber"
          dataupdate="UpdatePatientPhoneNumber"
          appendrequest="patientId=[searchselect]"          
          appendinsert="patientId=[searchselect]"
          appendupdate="patientId=[searchselect]"
          source="Active,Selected,PhoneType,PhoneNumber"
          sourcelabels="Active,Primary,Type,Number"	
          align="||left|left|"
          translate="PhoneType"
          key="PhoneNumberGuid"
          format="boolean|primary|tcase"/>
     
          <control type="datagrid" 
          label="Patient Contacts"	 
          name="PatientContacts" 
          option="Contacts"
          span="6"
          rows="7"
          modalname="NewContacts"       
          idle="[searchselect]="            
          datarequest="GetPatientSupportContactsByPatientId"
          datainsert="InsertPatientSupportContacts"
          dataupdate="UpdatePatientSupportContacts"
          appendrequest="patientId=[searchselect]"
          appendinsert="patientId=[searchselect],relationshipDescription=[RelationshipDescriptionText],state=[NewContacts_Province]"
          appendupdate="patientId=[searchselect],relationshipDescription=[RelationshipDescriptionText],state=[NewContacts_Province]"
          source="Active,ContactRelationship,FirstName,LastName,HomeTelephone,WorkTelephone,MobileTelephone,EmailAddress"
          sourcelabels="Active,Relationship,First Name,Last Name,Phone,Work,Cell,Email"	
          align="|left|left|left|left|left|left|left|left"
          format="boolean" 
          translate="ContactRelationship"
          key="ContactGuid"
          provoke="NewContacts_CountryCode"/>
                            
        <control type="datagrid" 
          label="Employees"	 
          name="PatientEmployers" 
          option="Employers"
          span="12"    
          rows="7"      
          modalname="NewEmployer"
          idle="[searchselect]="
          datarequest="GetPatientEmployers"
          datainsert="InsertPatientEmployer"
          dataupdate="UpdatePatientEmployer"          
          appendrequest="patientId=[searchselect]"
          appendinsert="patientId=[searchselect]"
          appendupdate="patientId=[searchselect]"
          format="boolean|primary||||date|date|"
          source="Active,Selected,Occupation,EmployerName,PhoneNumber,EmploymentStarted,EmploymentEnded"
          sourcelabels="Active,Primary,Occupation,Employee Name,Phone,Employment Initiated,Employment Completed"	
          align="||left|left|left|left|left|"
          key="EmployerGuid"
          provoke="NewEmployer_COUNTRYCODE"/>
      
        <control type="datagrid" 
          label="Payers"	 
          name="PatientPayers" 
          option="Payers" 
          span="12"  
          rows="7"     
          modalname="newpayers"     
          idle="[searchselect]="       
          datarequest="GetPatientPayers"
          datainsert="InsertPatientPayer2"
          dataupdate="UpdatePatientPayer2"
          appendrequest="patientId=[searchselect]"         
          appendinsert="patientId=[searchselect]"
          appendupdate="patientId=[searchselect]"
          format="boolean|||date|date|||"
          source="Active,Ordinal,PayerName,EffectiveDate,EndDate,PlanName,GroupNumber"
          sourcelabels="Active,Priority,Payer Name,Start Date,End Date,Plan Name,Group Number"	
          align="|left|left|left|left|left|left|left|"
          key="PatientPayerGuid"
          provoke="PatientPayerGroup_PayerCountry"/>
       </control>   
      </row>
    </group>
  </section>
  
  <section type="modal" name="NewPatientPhone" title="Patient's Phone"	  size="small"
           enteredby="EnteredByFullName" updatedby="LastUpdatedByFullName"
           dtentered="DateTimeEntered" dtupdated="DateTimeLastUpdated">
    <group>
      <row>
        <control type="label" label="Type"		 span="3"/>
        <control type="select" name="PhoneType" default="MOBILE PHONE" span="3" sourcelabels="Home Phone,Cell Phone,Fax,Pager,Night Phone,Main Phone,Work Phone,Personal Night"	
          source="HOME PHONE,MOBILE PHONE,FAX,PAGER,NIGHT PHONE,PRIMARY PHONE,WORK PHONE,PERSONAL NIGHT" required="true" edit="true" />
      </row>
      <row>
        <control type="label" label="Active"	 span="3"/>
        <control type="buttongroup" name="NewPatientPhone_Active" span="3" sourcelabels="Yes,No"	 
          source="True,False" edit="true" default="True" />
      </row>
      <row>
        <control type="label" label="Primary"	 span="3"/>
        <control type="buttongroup" name="NewPatientPhone_Selected" span="3" sourcelabels="Yes,No"	
          source="True,False" edit="true" default="True" />
      </row>
      <row>
        <control type="label" label="Number"	 span="3"/>
        <control type="text" name="NewPatientPhone_PhoneNumber" span="3" required="true" edit="true" />
      </row>
      <row>
        <control type="label" label="Notes"	 span="3" />
        <control type="textarea" name="NewPatientPhone_Note" span="8" rows="2" edit="true"  />
      </row>
    </group>
  </section>  
  
  <section type="modal" name="NewAddress" title="Patient's Address"	 size="small"
    enteredby="EnteredByFullName" updatedby="LastUpdatedByFullName" 
    dtentered="DateTimeEntered" dtupdated="DateTimeLastChanged">
    <group>
      <row>
        <control type="label" label="Active"	 span="3"/>
        <control type="buttongroup" name="NewAddress_Active" sourcelabels="Yes,No"	
          source="True,False" span="3" edit="true" default="True" />
      </row>
      <row>
        <control type="label" label="Primary"	 span="3"/>
        <control type="buttongroup" name="NewAddress_Selected" span="3" sourcelabels="Yes,No"	
          source="True,False" edit="true" default="True" />
      </row>
      <row>
        <control type="label" label="Address Type"	 span ="3"/>
        <control type="select" name="AddressType" sourcelabels="Home,Work,Vacation,Second Home,Mail,Physical"	
          source="Home,Work,Vacation,2nd Home,Mailing,Physical"
          span="3" edit="true" default="Home" />
      </row>
      <row>
        <control type="label" label="Address 1"	 span ="3"/>
        <control type="text" name="NewAddress_StreetAddressLine1" span="5" edit="true" required="true" />
      </row>      
      <row>
        <control type="label" label="Address 2"	 span ="3"/>
        <control type="text" name="NewAddress_StreetAddressLine2" span="5" edit="true" />      
      </row> 
       <row>
        <control type="label" label="Neighborhood"	 span ="3"/>
        <control type="text" name="NewAddress_City" span="5" edit="true" />
      </row>      
      <row>
        <control type="label" label="Province"	 span ="3"/>
        <control type="text" name="NewAddress_Barangay" span="5" edit="true" />
      </row>
      <row>
       <control type="label" label="Country"	 span="3"/>
       <control type="select" name="NewAddress_Province" span="3" edit="true"
          datasource="GetStatesProvincesByCountryCode"
          source="Name,Code" explicit="true"
          append="countryCode=[NewAddress_CountryCode]"/>
      </row>
      <row>
        <control type="label" label="Postal Code"	 span ="3"/>
        <control type="text" name="NewAddress_PostalCode" span="3" edit="true" />
      </row>        
      <row>
       <control type="label" label="Country"	 span ="3"/>
       <control type="select" name="Country,NewAddress_CountryCode" span="3" edit="true" default="(facilityData.HospitalCountry)" required="true"  
          datasource="GetCountries" 
          source="Country,Code"
          provoke="NewAddress_Province"/>
      </row>       
     </group>
  </section>

  <section type="modal" name="NewIdentification" title="Patient Identification"	 size="small"
           enteredby="EnteredByFullName" updatedby="LastUpdatedByFullName"
           dtentered="DateTimeEntered" dtupdated="DateTimeLastUpdated" >
    <group>
      <row>
        <control type="label" label="Active"	 span="3"/>
        <control type="buttongroup" name="NewIdentification_Active" span="2" sourcelabels="Yes,No"	 source="True,False" default="True" edit="true" />
      </row>      
      
      <row>
        <control type="label" label="ID Type"	 span="3"/>
        <control type="select" name="IdType"
          datasource="GetPersonIdentificationTypes" source="IdType,IdType"
          span="4" edit="true" required="true" />
      </row>
      
      <row>
        <control type="label" label="ID Number"	 span="3"/>
        <control type="text" name="IdNumber" span="4" edit="true" />
      </row>
    </group>
  </section>
  
  <section type="modal" title="Patient Payer"	 name="newpayers"  
           enteredby="EnteredByFullName" updatedby="LastUpdatedByFullName"
           dtentered="DateTimeEntered" dtupdated="DateTimeUpdated" >

    <group name="PatientPayerGroup">      
      <row>        
        <control type="label" label="Priority"	 span="2" />
        <control type="select" name="TypeDesc,Ordinal" span="3"
          acctsvc="true" acctsvcreq="true"
          sourcelabels="Primary,Secondary,Tertiary"	
          source="1,2,3"
          edit="true" />
        <control type="label" span="2" label="Active"	/>
        <control type="buttongroup" name="newpayers_Active" edit="true" span="3" default="True" required="true" sourcelabels="Yes,No"	 source="True,False" />
      </row>

      <row>
        <control type="label" span="2" label="Payer"	/>       
        <control name="PayerGuid" 
            set="PayerType=[[PayerType]],PayerAddress1=[[MailingAddressLine1]],PayerAddress2=[[MailingAddressLine2]],PayerCity=[[MailingCity]],PatientPayerGroup_PayerStateProvince=[[MailingStateProvince]],PayerPostalCode=[[MailingPostalCode]],PayerCountry=[[MailingCountry]],PayerStateProvince=[[MailingStateProvince]],PatientPayerGroup_PayerPhone=[[Phone]],PatientPayerGroup_PayerCell=[[Cell]],PatientPayerGroup_PayerFax=[[Fax]]" 
            type="select" 
            datasource="GetPayersActive" 
            source="PayerName,PayerGuid"              
            sort="PayerName" span="3"  edit="false" required="true" acctsvc="true"/>
        <control type="label" span="2" label="Payer Type"	/>
        <control type="text" name="PayerType" span="3" readonly="true" />
      </row>
      
      <row divider="true">        
        <control type="header" align="left" span="8">Payer Information</control>
      </row> 

      <row>
        <control type="label" span="1" label="Address 1"	/>
        <control type="text" name="PayerAddress1" span="3" edit="true" />
        <control type="label" span="1" label="Address 2"	/>
        <control type="text" name="PayerAddress2" span="3" edit="true" />
        <control type="label" span="1" label="Neighborhood"	/>
        <control type="text" name="PayerCity" span="3" edit="true" />
      </row>

      <row>
        <control type="label" span="1" label="Country"	/>         
        <control type="select" name="PatientPayerGroup_PayerStateProvince" span="3" edit="true"
          datasource="GetStatesProvincesByCountryCode"
          source="Name,Code" explicit="true"
          append="countryCode=[PatientPayerGroup_PayerCountry]"/> 
        <control type="label" span="1" label="Postal Code"	/>
        <control type="text" tolltip="Postal Code" name="PayerPostalCode" span="3" edit="true" />
        <control type="label" span="1" label="Country"	/>        
        <control type="select" name="Country,PatientPayerGroup_PayerCountry" span="3" edit="true" default="(facilityData.HospitalCountry)" required="true"  
          datasource="GetCountries" 
          source="Country,Code"
          provoke="PatientPayerGroup_PayerStateProvince"/>               
      </row>

      <row>
        <control type="label" span="1" label="Phone"	/>
        <control type="text" name="PatientPayerGroup_PayerPhone" span="3" edit="true" />
        <control type="label" span="1" label="Cell Phone"	/>
        <control type="text" name="PatientPayerGroup_PayerCell" span="3" edit="true" />
        <control type="label" span="1" label="Fax"		/>
        <control type="text" name="PatientPayerGroup_PayerFax" span="3" edit="true" />
      </row>

      <row divider="true">        
        <control type="header" align="left" span="8">Insurance Information</control>
      </row> 

      <row>
        <control type="label" span="1" label="Relationship"	/>
        <control type="select" name="DependentClass" span="3" source="Self,Child,Spouse,Employee,Unknown,Other" sourcelabels="Own,Child,Spouse,Employee,Unknown,Other"	 edit="true" default="Self" tooltip="Patient's relationship to the Insured."	 />
        <control type="label" span="1" label="Category"		/>
        <control type="select" name="MemberCategory" span="3" source="Dependent,Employed: Govt,Employed: Private,Guardian,Individually Paying,Lifetime Benefit,OFW,Sponsored,Other" sourcelabels="Dependent,Employee: Government,Employee: Private,Guardian,Individual pay,Lifetime benefit,OFW,Sponsored,Other" edit="true" />        
        <control type="label" span="1" label="ID"		/>
        <control type="text" name="MemberId" span="3" edit="true" /> 
      </row>

      <row>        
        <control type="label" span="1" label="Sex"	/>
        <control type="select" name="InsuredGender" span="3" source="Male,Female,Indeterminate" edit="true" default="[PatientSex]" />
        <control type="label" span="1" label="Date of Birth"	/>
        <control type="date" name="InsuredDateOfBirth" span="3" edit="true" default="[PatientDOB]" />
        <control type="label" span="1" label="Insurer#"	/>
        <control type="text" name="InsuredSSN" span="3" edit="true" default="[PtSSN]" />
      </row>
      
      <row>
        <control type="label" span="1" label="Name"	/>
        <control type="text" name="InsuredFirstName" span="3" edit="true" default="[patientInfo_PatientFirstName]" />
        <control type="label" span="1" label="Parent"	/>
        <control type="text" name="InsuredMiddleName" span="3" edit="true" default="[patientInfo_PatientMiddleName]" />
        <control type="label" span="1" label="Maternal"	/>
        <control type="text" name="InsuredLastName" span="3" edit="true" default="[patientInfo_PatientLastName]" />
      </row>
      
      <row>
        <control type="label" span="1" label="Address 1"	/>
        <control type="text" name="InsuredAddress1" span="3" edit="true" />
        <control type="label" span="1" label="Address 2"	/>
        <control type="text" name="InsuredAddress2" span="3" edit="true" />
        <control type="label" span="1" label="Neighborhood"	/>
        <control type="text" name="InsuredCity" span="3" edit="true" />
      </row>

      <row>     
        <control type="label" span="1" label="Postal Code"	/>
        <control type="text" tooltip="Zip Code"	 name="InsuredZipCode" span="3" edit="true" />
        <control type="label" span="1" label="Country"	/>
        <control type="text" name="InsuredState" span="3" edit="true" />
        <control type="label" span="1" label="Phone"	/>
        <control type="text" name="InsuredPhoneNumber" span="3" edit="true" /> 
      </row>

      <row>
        <control type="label" span="1" label="Policy"	/>
        <control type="text" name="PolicyNumber" span="3" edit="true" />                        
        <control type="label" span="1" label="Employee ID"	/>
        <control type="text" tooltip="Employee Identification Number"	 name="newpayers_EmployerId" span="3" edit="true" />
      </row>

      <row>
        <control type="label" span="1" label="Employee Address"	/>
        <control type="textarea" tooltip="Employee Address"	 name="InsuredEmployerAddress" rows="3" span="11" edit="true" />
      </row>

      <row divider="true">        
        <control type="header" align="left" span="8">Plan Information</control>
      </row> 

      <row>
        <control type="label" span="1" label="Cash"	/>
        <control type="date" tooltip="Effective Date"	 name="EffectiveDate" span="3" edit="true"  format="date"/>
        <control type="label" span="1" label="Start Date"	/>
        <control type="date" name="StartDate" span="3" edit="true"  format="date"/>
        <control type="label" span="1" label="End Date"	/>
        <control type="date" name="EndDate" span="3" edit="true"  format="date"/>
      </row>

      <row>
        <control type="label" span="1" label="Verified"	/>
        <control type="date" tooltip="Verification Date"	 name="VerificationDateTime" span="3" edit="true"  format="date"/>
        <control type="label" span="1" label="Plan #"	/>
        <control type="text" name="PlanName" span="3" edit="true" />
        <control type="label" span="1" label="Group #"	/>
        <control type="text" name="GroupNumber" span="3" edit="true" />
      </row>      
      
      <row>
        <control type="label" span="1" label="Annual Deduction"	/>
        <control type="text" tooltip="Annual Deduction"	 name="AnnualDeductible" span="3" edit="true" default="0" format="0,0"/>
        <control type="label" span="1" label="Max / Incident"	/>
        <control type="text" tooltip="Maximin per Incident"	 name="MaxIncidentBenefit" span="3" edit="true" default="0.00" format="0,0"/>
        <control type="label" span="1" label="Max / Year"	/>
        <control type="text" tooltip="Maximin Annual Benefit"	 name="MaxAnnualBenefit" span="3" edit="true" default="0.00" format="0,0"/>
      </row>

      <row>       
        <control type="label" span="1" label="Hospital Copay"	/>
        <control type="text" name="CoPay" span="3" edit="true" default="0.00" format="0,0"/>
      </row>

      <row>
        <control type="label" label="Description of Coverage"	 span="1" />
        <control type="textarea" name="Notes" span="11" rows="2" edit="true"  />
      </row>
    </group>
  </section>  

 <section type="modal" title="Patient Contacts"	 name="NewContacts" size="small"
           enteredby="EnteredByFullName" updatedby="LastChangedByFullName"
           dtentered="DateTimeEntered" dtupdated="DateTimeLastChanged">
    <group>
      <row>
        <control type="label" span="3" label="Relationship"	/>        
        <control type="select" name="ContactRelationship" span = "3" required="true" sourcelabels="Spouse,Son,Daughter,Sister,Brother,Mother,Father,Physician,Guardian"	 source="
        Spouse,Son,Daughter,Sister,Brother,Mother,Father,Doctor,Gaurdian"
          edit="true" />
        <control type="label" label="Active"	 span ="2"/>
        <control type="buttongroup" name="NewContacts_Active" span="3" required="true" source="True,False" sourcelabels="Yes,No"	 default="True" edit="true" />
      </row>
     <!--  <row>
        <control type="hidden" span="3" label="National Id"/> 
        <control type="hidden" name="NationalID" span="3" required="true" edit="true" />
      </row> -->
      
      <row>
        <control type="label" label="Name"	 span="3"/>
        <control type="text" name="FirstName" span="3" required="true" edit="true"  />
        <control type="label" label="Last Name"	 span="2"/>
        <control type="text" name="LastName" span="3" required="true" edit="true" />
      </row>
      <!-- <row>
         <control type="label" label="Language" span="3" />
         <control type="select" name="LanguageSpoken1" span="3"
           source="Language,Language" datasource="GetLookupLanguageSpoken" default="English" edit="true" />
       </row> -->
       <row>
        <control type="label" label="Address 1"	 span ="3"/>
        <control type="text" name="NewContacts_StreetAddress1" span="3" edit="true" />
        <control type="label" label="Email"			 span ="2"/>
        <control type="text" name="EmailAddress" verify="email" span="3" edit="true" />        
       </row>
       <row>         
        <control type="label" label="Address 2"	 span ="3"/>
        <control type="text" name="NewContacts_StreetAddress2" span="3" edit="true" /> 
        <control type="label" label="Phone"	 span ="2"/>
        <control type="text" name="HomeTelephone" span="3" edit="true" />             
       </row>
       <row>
        <control type="label" label="Neighborhood"	 span ="3"/>
        <control type="text" name="NewContacts_City" span="3" edit="true" />
        <control type="label" label="Cell Phone"	 span ="2"/>
        <control type="text" name="MobileTelephone" span="3" edit="true" />         
       </row>
       <row>
         <control type="label" label="Province"	 span ="3"/>
         <control type="text" name="NewContacts_Barangay" span="3" edit="true" /> 
         <control type="label" label="Work Phone"	 span ="2"/>
         <control type="text" name="WorkTelephone" span="3" edit="true" />           
       </row>
       <row>   
        <control type="label" label="Country"	 span ="3"/>
        <control type="select" name="NewContacts_Province" span="3" edit="true"
          datasource="GetStatesProvincesByCountryCode"
          source="Name,Code" explicit="true" 
          append="countryCode=[NewContacts_CountryCode]"/>
       </row>
       <row>        
        <control type="label" label="Postal Code"	 span ="3"/>
        <control type="text" name="NewContacts_PostalCode" span="3" edit="true" />
       </row>       
       <row showif="never">
         <control type="hidden" label="District"	 span ="3"/>
         <control type="hidden" name="County" span="3" edit="true" />         
       </row>       
       <row>      
        <control type="label" label="Country"	 span ="3"/>
        <control type="select" name="Country,NewContacts_CountryCode" span="3" edit="true" default="(facilityData.HospitalCountry)" required="true"
          datasource="GetCountries" 
          source="Country,Code"
          provoke="NewContacts_Province"/>
       </row>       
    </group>
  </section>  

  <section type="modal" title="Patient's Employer"	 name="NewEmployer" size="small"
    enteredby="EnteredByFullName" updatedby="LastUpdatedByFullName" 
    dtentered="DateTimeEntered" dtupdated="LastUpdatedDateTime">
    <group>     
      <row>
        <control type="label" span="3" label="Company Name"	/>
        <control type="text" name="EmployerName" required="true" span = "8" edit="true" />
         </row>
      <row>
        <control type="label" label="Active"	 span ="3"/>
        <control type="buttongroup" name="NewEmployer_Active" span="2" sourcelabels="Yes,No"	 source="True,False" default="True" edit="true" />
        <control type="label" label="Primary"	 span="3"/>
        <control type="buttongroup" name="NewEmployer_Selected" span="2" sourcelabels="Yes,No"	
          source="True,False" edit="true" default="True" />
      </row>

      <row>
        <control type="label" label="Address 1"	 span ="3"/>
        <control type="text" name="NewEmployer_StreetAddressLine1" span="3" edit="true" />
        <control type="label" label="Address 2"	 span ="2"/>
        <control type="text" name="NewEmployer_StreetAddressLine2" span="3" edit="true" />
      </row>

      <row>
        <control type="label" label="Neighborhood"	 span ="3"/>
        <control type="text" name="NewEmployer_City" span="3" edit="true" /> 
        <control type="label" label="Province"	 span ="2"/>
        <control type="text" name="NewEmployer_Barangay" span="3" edit="true" /> 
      </row>  

      <row>
        <control type="label" label="Country"	 span ="3"/>
        <control type="select" name="NewEmployer_Province" span="3" edit="true"
          datasource="GetStatesProvincesByCountryCode"
          source="Name,Code" explicit="true"
          append="countryCode=[NewEmployer_COUNTRYCODE]"/>
        <control type="label" label="Postal Code"	 span ="2"/>
        <control type="text" name="NewEmployer_PostalCode" span="3" edit="true" />  
      </row>      
     
      <row>
        <control type="label" label="Country"	 span ="3"/>
        <control type="select" name="Country,NewEmployer_COUNTRYCODE" span="3" edit="true" default="(facilityData.HospitalCountry)" required="true"
          datasource="GetCountries" 
          source="Country,Code"
          provoke="NewEmployer_Province"/>        
      </row>
            
      <row divider="true">
      </row>
      
       <row>
        <control type="label" label="Contact"	 span ="3"/>
        <control type="text" name="NewEmployer_Contact" span="3" edit="true" />
        <control type="label" label="Phone"	 span ="2"/>
        <control type="text" name="NewEmployer_PhoneNumber" span="3" edit="true" />       
      </row>
      
      <row>
        <control type="label" label="Employer ID"	 span="3"/>
        <control type="text" span="3" name="NewEmployer_EmployerId" edit="true"  />
        <control type="label" label="Occupation"	 span ="2"/>
        <control type="text" name="Occupation" span="3" edit="true" />
      </row>      
      
      <row>
        <control type="label" label="Start Date"	 span ="3"/>
        <control type="date" name="EmploymentStarted" span="3" edit="true" />
        <control type="label" label="End Date"	 span ="2"/>
        <control type="date" name="EmploymentEnded" span="3" edit="true" />        
      </row>
    
      <row>
        <control type="label" label="Notes"	 span="3" />
        <control type="textarea" name="NewEmployer_Notes" span="8" rows="2" edit="true"  />
      </row>
    </group>
  </section>  


  <!-- ****************** VISIT SECTION *******************  -->
  
  <section type="tabmodal" badge="none" name="PatientVisits" title="Patient Visits"	> 
    <group type="controlset" name="visitcontrolbar">
      <!-- <row>
        <control type="group" span="7">
        <control type="header" >Nombre del Paciente:</control>
        <control type="header" name="visitcontrolbar_PatientFirstName" persist="true" />
        <control type="header" name="visitcontrolbar_PatientMiddleName" persist="true" />
        <control type="header" name="visitcontrolbar_PatientLastName" persist="true" />
        </control>
        <control type="group" align="right" span="5">
        <control type="header" >Expediente:</control>
        <control type="header" name="visitcontrolbar_MedicalRecordNumber" persist="true" />
        </control>
      </row> -->
      <row>      
        <control type="select" name="visitselect" span="4" placeholder="Haga clic aquí para elegir una visita"            
          source="AdmitDateTime|InvoiceNumber|DischargeDateTime,PatientVisitUniqueId"
          datasource="GetPatientVisitsByFacilityAndPatient2" 
          datarequest="GetPatientVisitsByFacilityAndPatient2"
          append="PatientId=[searchselect]"
          appendrequest="patientId=[searchselect]"
          format="datetime|null^None|datetime^Open Visit"
          inject="visitdata"
          explicit="true"          
          provoke="balanceControlGroup,patientcharges|active,patient_payments|active,payer_payments|active,ERGridList,ERProblemList,ERPhysicianAssignments,ERLabOrders,ERLabResults,ERMedications,ERImagingOrders,ERImagingResults,EREcdForms,New_ScannedForms,ERHomeMedications,ERProcedures,GuarantorState,patientcharges,patientreceipts,payerreceipts,patientinvoiceclaims,DischargeDateTime,newclaims_PayerGuid,newpayerreceipts_PayorGuid,NewChargesInfo_ClaimGuid,billingnotes"          
          action="new"/>  
          
        <control type="button" span="2" name="VisitSave"
          compare="[visitselect]!|Primero selecciona un visita"         
          tooltip="Click to save your visit changes."	 
          action="save" label="Save"	 
          icon="cloud-upload" 
          capture="visitdata"          
          datainsert=""
          acctsvc="true"
          acctsvcreq="true"
          dataupdate="UpdatePatientVisitNoDepartmentTracking"
          affector="visitselect"
          setaffector="PatientVisitUniqueId"
          appendinsert="patientId=[searchselect]"
          appendupdate="patientId=[searchselect],patientVisitUniqueId=[visitselect]"/>

       <control type="header" align="right" span="4">Admit and Discharge Information</control>
       <control type="buttongroup" name="AdmittingAndDischargeShow"           
          span="2" 
          sourcelabels="Show,Hide"	 source="True,False" 
          default="False" edit="visitselect!" /> 
      </row>
    </group>

    <!-- test="insert^[visitselect]!Open|A patient can only have one open visit."  -->

    <group name="visitdata">      
     <subset>
      <row showif="never">
        <control type="text" name="visitdata_InvoiceNumber"/>
      </row>
     </subset>
     <subset name="AdmittingInformation"  reveal="AdmittingAndDischargeShow=True">
      
      <row>
       <control type="label" span="1" label="Visit"	/>      
        <control type="buttongroup" name="VisitType" span = "3" required="true" sourcelabels="Inpatient,Outpatient"	
          source="Inpatient,Outpatient" default="Inpatient" />
       <control type="label" label="Case Type"		 span ="1"/>        
       <control type="select" name="CaseTypex,CaseType" span="2" edit="true"
          datasource="GetCaseTypesActive"
          acctsvc="true"
          source="CaseTypeName,CaseTypeGuid" />   
       <control type="label" label="Department"			 span ="2"/>        
        <control type="select" name="AdmissionType" span="3" edit="true" required="true"
          source="STR,CODE"
          datasource="GetAdmitTypesForThisFacility" />   
      </row>

      <row>                
        <control type="label" label="Type"			 span ="1"/>
        <control type="select" name="AdmitType" span="3" edit="true" required="true"
          explicit="true"
          source="AdmissionType,AdmissionTypeGuid"
          datasource="GetLookupAdmissionTypesActive" />       
        <control type="label" label="Source"	 span ="1"/>       
        <control type="select" name="AdmitSource" span="3" edit="true" 
          explicit="true"
          datasource="GetLookupAdmitSourcesByFacility" 
          required="true"
          source="AdmitSource,AdmitSource" />  
        <control type="label" label="Transferred"	 span="1"/>
        <control type="select" name="FacilityTransferredFrom" edit="true" span="3"
          source="HospitalName,HospitalGuid"
          acctsvc="true"
          datasource="GetTransferHospitalsActive" />          
      </row>

      <row>
        <control type="label" label="ICD Visit"	 span="1" />
        <control type="typeahead" tooltip="The ICD code cannot be updated."	 name="ReasonForVisit" rows="1"  span="8" align="left"
          source="ICD10CodeDescription,ICD10Code" asyndeton="true"
          datasource="GetICD10CodesSearchByTerm"
          term="term"/>                                
      </row>

      <row>
        <control type="label" span="1" label="Follow-up"	/>
        <control type="buttongroup" name="ReadmissionIndicator"
          span="2" required="true" sourcelabels="Yes,No"	 source="True,False" default="False" />
        <control type="label" label="Follow-up Visit ID"	 span ="2"/>
        <control type="text" name="FollowUpVisit" span="2" /> 
      </row>     

      <row>
        <control type="label" label="Claim"	 span ="1"/>
        <control type="textarea" name="EdChiefComplaint" span="4" rows="1" edit="true" />      
        <control type="label" label="Admission"	 span="1"/>
        <control type="datetime" name="AdmitDateTime" span="2" default="now" edit="true" required="true"  />      
        <control type="label" label="Decision Time"	 span ="2"/>
        <control type="datetime" name="AdmitDecisionTime" span="2" 
          default="now"
          tooltip="Enter the Date/Time the decision to admit the patient was made"	 edit="true" />    
      </row>           
      
      <row>        
        <control type="label" label="Arrival"	 span ="1"/>
        <control type="select" name="AmbulatoryStatus" default="Ambulatory" span="3" edit="true" required="true" sourcelabels="Outpatient,Carried,Stretcher,Wheelchair"	
          source="Ambulatory,Carried,Stretcher,Wheelchair" />             
        <control type="label" label="Admission User"	 span ="2"/>        
        <control type="select" span="4"
            name="AdmittingDoctor" 
            edit="true" 
            explicit="true"
            acctsvc="true"
            source="FullName,UserId" 
            append="LocationId=(facilityData.LocationId),role=Physician"
            datasource="GetUsersByAttributes"/>     
      </row> 

      <row>
        <control type="label" label="Notes"	 span="1" />
        <control type="textarea" name="AdmitNote" span="11" rows="1" edit="true"  />
      </row>   
      
      <row>
        <control type="label" label="Discharged"	 span="1"/>
        <control type="datetime" name="DischargeDateTime" edit="false" span="2" />        
        <control type="label" label="Condition"	 span="1"/>
        <control type="select" span="2" edit="false" name="DischargeCondition"
          source="Condition,Condition" 
          datasource="GetLookupConditionCodes"
          filter="Type=Discharge"
          />       
        <control type="label" label="Disposition"	 span="1"/>
        <control type="select" span="2" edit="false" name="DischargeDisposition"
          datasource="GetLookupDischargeDispositions"
          source="DischargeDisposition,DischargeDisposition" />       
        <control type="label" label="Transferred"	 span="1"/>
        <control type="select" name="FacilityTransferredTo" span="2" 
          source="HospitalName,HospitalGuid"
          acctsvc="true"
          datasource="GetTransferHospitalsActive"
          edit="false" />
      </row>
      
      <row>
        <control type="label" label="Notes"	 span="1" />
        <control type="textarea" name="Note" span="11" rows="1" edit="false"  />
      </row>
     
    </subset>

    <subset name="VisitGuarantorSection" reveal="AdmittingAndDischargeShow=True">
   
        <row divider="true">
        </row>     
        <row>        
          <control type="header" align="left" span="3">Garante</control>              
        </row>
          
        <row>        
          <control type="label" span="1" label="Relationship"	/>        
          <control type="select" tooltip="Patient's relationship to the Insured."	 name="GuarantorRelationship" span = "3" sourcelabels="Myself,Aunt,Brother,Daughter,Father,Second cousin,First cousin,Friend,Great-aunt,Great-grandfather,Great-grandmother,Great-uncle,Guardian,Second cousin,Maternal grandfather,Maternal grandmother,Mother,Paternal grandfather ,Paternal grandmother,Sister,Son,Spouse,Uncle " source="Self,Aunt,Brother,Daughter,Father,Female 2nd Cousin,Female First Cousin,Friend,Great-Aunt,Great-Grandfather,Great-Grandmother,Great-Uncle,Guardian,Male 2nd Cousin,Male First Cousin,Maternal Grandfather,Maternal Grandmother,Mother,Paternal Grandfather,Paternal Grandmother,Sister,Son,Spouse,Uncle" edit="true" />       
       </row>

       <row>        
        <control type="label" label="Name"	 span ="1"/>
        <control type="text" name="GuarantorFirstName" span="3" edit="true" />        
        <control type="label" label="Parent"	 span ="1"/>
        <control type="text" name="GuarantorMiddleName" span="3" edit="true" />
        <control type="label" label="Maternal"	 span ="1"/>
        <control type="text" name="GuarantorLastName" span="3" edit="true" />
      </row>

      <row>        
        <control type="label" label="Address 1"	 span ="1"/>
        <control type="text" name="GuarantorAddressLine1" span="3" edit="true" />
        <control type="label" label="Address 2"	 span ="1"/>
        <control type="text" name="GuarantorAddressLine2" span="3" edit="true" /> 
        <control type="label" label="City"	 span ="1"/>
        <control type="text" name="GuarantorCity" span="3" edit="true" />       
      </row>
       
      <row>   
        <control type="label" label="Postal Code"	 span ="1"/>
        <control type="text" name="GuarantorZipCode" span="3" edit="true" />     
        <control type="label" label="Country"	 span ="1"/>
        <control type="select" name="Country,GuarantorCountry" span="3" edit="true" 
          default="(facilityData.HospitalCountry)"
          datasource="GetCountries" 
          source="Country,Code"
          provoke="GuarantorState"/>
        <control type="label" label="State"	 span ="1"/>
        <control type="select" name="GuarantorState" span="3" edit="true"
          datasource="GetStatesProvincesByCountryCode"
          source="Name,Code" explicit="true"
          append="countryCode=[GuarantorCountry]"/>/>
      </row>

      <row>        
         <control type="label" label="Phone"	 span ="1"/>
         <control type="text" name="GuarantorPhone" span="3" edit="true" />
         <control type="label" label="Insurer#"	 span ="1"/>
         <control type="text" name="GuarantorSocialSecurity" span="3" edit="true" /> 
         <control type="label" label="Date of Birth"	 span="2" />
         <control type="date" name="GuarantorDOB" span="2" edit="true" />       
      </row>

      <row>        
         <control type="label" label="Employer"	 span ="1"/>
         <control type="text" name="GuarantorEmployer" span="3" edit="true" />
         <control type="label" label="Employer Phone"	 span ="2"/>
         <control type="text" name="GuarantorEmployerPhone" span="2" edit="true" />          
      </row> 

      <row divider="true">
      </row>      
    </subset>  

    <subset>
     <row>
        <control type="label" label="Patient Billing Status"	 span="3" align="left"/>
        <control type="label" label="Request Billing Status"	 span="3" align="left" offset="3"/>
      </row>
    </subset>  

   <subset name="PatientAndPayerBillingStatuses">        
      <columns>       
        <column name="column1" span="6">
          <columns>
             <column name="column1a" span="8" bgcolor="white">              
              <row>
                <control type="label" label="Billing Date"	 span="6"/>
                <control type="date" span="6" name="InvoiceBillDate" edit="visitselect!" />        
             </row>
             <row>
                <control type="label" label="Expiration Date"	 span="6"/>
                <control type="date" span="6" name="InvoiceDueDate" edit="visitselect!" />         
             </row>
             <row>
                <control type="label" label="Assigned to"	 span="5"/>
                <control type="select" span="7" name="InvoiceAssignedTo"
                    explicit="true"
                    source="FullName,UserId"
                    append="LocationId=(facilityData.LocationId),userRoles=MedWave,active=1"
                    datasource="GetUsersForThisFacility" edit="visitselect!" />          
              </row>
              <row>
                 <control type="label" label="Approved by"	 span="5"/>
                 <control type="select" span="7" name="InvoiceApprovedBy"
                    explicit="true"
                    source="FullName,UserId"
                    append="LocationId=(facilityData.LocationId),userRoles=MedWave,active=1"
                    datasource="GetUsersForThisFacility" edit="visitselect!" />
             </row> 
             </column>   
           <column name="column1b" span="4">               
               <row>
                 <control type="buttonvertgroup" span="12" name="InvoiceStatus" sourcelabels="Open,Hold,Bill Patient,Patient Billed,Completed"	        
                     source="Open,Hold,Bill Patient,Patient Billed,Settled" edit="visitselect!"/>
              </row>                  
           </column> 
       </columns>
      </column>  
             <column name="column2" span="6" >
          <columns>
             <column name="column2a" span="8" bgcolor="white">                    
              <row>
                <control type="label" label="Request Sent"	 span="6"/>
                <control type="date" span="6" name="ClaimSubmittedDate" edit="visitselect!" />        
             </row>
             <row>
                <control type="label" label="Expiration Date"	 span="6"/>
                <control type="date" span="6" name="PayerInvoiceDueDate" edit="visitselect!" />         
             </row>
             <row>
                <control type="label" label="Assigned to"	 span="5"/>
                <control type="select" span="7" name="PayerInvoiceAssignedTo"
                    explicit="true"
                    source="FullName,UserId"
                    append="LocationId=(facilityData.LocationId),userRoles=MedWave,active=1"
                    datasource="GetUsersForThisFacility" edit="visitselect!" />          
              </row>
              <row>
                 <control type="label" label="Approved by"	 span="5"/>
                 <control type="select" span="7" name="PayerInvoiceApprovedBy"
                    explicit="true"
                    source="FullName,UserId"
                    append="LocationId=(facilityData.LocationId),userRoles=MedWave,active=1"
                    datasource="GetUsersForThisFacility" edit="visitselect!" />
             </row> 
             </column>   
           <column name="column2b" span="4">              
               <row>
                 <control type="buttonvertgroup" span="12" name="PayerInvoiceStatus" sourcelabels="Open,Hold,Send Request,Request Sent,Completed"	        
                     source="Open,Hold,Submit Claim,Claim Submitted,Settled" edit="visitselect!" />
              </row>                  
           </column> 
       </columns>
      </column>  
     </columns>   
   </subset>

   <subset>
      <row>
        <control type="label" label="Alert"	 span="1" />
        <control type="textarea" name="BillingNotes" span="5" rows="1" edit="visitselect!"  align="left" />      
        <control type="group" name="balanceControlGroup" span="6" reveal="[visitselect]!">    
          <control type="label" label="Charges"	 align="right" span="1" />
          <control type="calc" name="VisitCharges" span="1" format="0,00.00" default="0.00"  source="NetAmountTotal*1"/>
          <control type="label" label="Payments"	 align="right" span="1"/>
          <control type="calc" name="VisitPayments" span="1" format="0,00.00"  default="0.00" source="(patient_AmountPaidTotal*1)+(payer_AmountPaidTotal*1)"/>
          <control type="label" label="Balance"		 align="right" span="1"/>
          <control type="calc" name="VisitInvoiceBalance" span="2" format="0,00.00" default="0.00" source="VisitCharges - VisitPayments" />      
        </control>   
      </row>
   </subset>

   <subset name="BillingInfoName" reveal="visitselect!">
      <row>
        <control type="header" align="left" span="3"></control> 
        <control type="buttongroup" 
          name="ButtonGroupSelect2" 
          edit="true" 
          persist="true" 
          source="billingnotes,Charges,Payments,PayerClaims"          
          sourcelabels="Billing Notes,Charges,Payments,Payer Requests"	 
          span="12" 
          default="billingnotes" 
            
          provoke="BillingGridList,billingnotes,patientcharges,patient_payments,payer_payments,payerclaims"/>          
      </row> 
      
      <row>
        <control name="BillingGridList" affector="ButtonGroupSelect2" type="options" span="12">
        <control type="datagrid" label="Billing Notes"	 name="billingnotes" span="12"
           rows="5" fitrows="true"
           option="billingnotes"
           modalname="newbillingnote"
           dependent="visitselect"
           idle="[visitselect]="
           datarequest="GetNursingNotesForThisPatientVisitByType"
           datainsert="InsertPatientNursingNote"
           dataupdate=""
           appendrequest="patientVisit=[visitselect],patientId=[searchselect],type=Billing"
           appendinsert="patientVisit=[visitselect],patientId=[searchselect],type=Billing,active=1,DateTimeNoted=(dateTimeNow)"            
           source="DateTimeEntered,EnteredByFullName,NoteType,NursingNote"
           sourcelabels="Date Entered,Entered By,Note Type,Note"	
           format="datetime|||"
           align="left|left|left|left"
           translate="NoteType"
           key="NoteGuid"
           sort="DateTimeEntered=desc">
           <control type="button" name="refreshBillingNotes" action="trigger" trigger="billingnotes" label="Update"	 icon="refresh" target="" />
       </control> 

        <control type="datagrid" label="All Charges"	 name="patientcharges" span="12"
           rows="10" fitrows="true"
           option="Charges"
           modalname="newCharge"
           dependent="visitselect"
           idle="[visitselect]="
           acctsvcreq="true" 
           mode="sequence"
           datarequest="GetChargesByPatientVisit"
           datainsert="InsertPatientCharge2"
           dataupdate="UpdatePatientCharge"
           appendrequest="patientVisit=[visitselect],patientId=[searchselect]"
           appendinsert="patientVisit=[visitselect],patientId=[searchselect]"           
           source="TransactionDateTime,SequenceNumber,ChargeToDescription,ClaimNumber,ItemName,TransactionQuantity,PerItemChargeAmount,TotalChargeAmount,DiscountAmount,TaxAmount,NetAmount"
           sourcelabels="Date,Sequence,Charge To,Request,Item Name,Quantity,Price,Total,Discount,Tax,Net"	
           translate="Status,ChargeToDescription"
           format="datetime|||||0,000.00|0,000.00|0,000.00|0,000.00|0,000.00|0,000.00"
           align="left|left|left|left|left|right|right|right|right|right|right"
           total="|||||||+|+|+|+"
           key="TransactionGuid"             
           provoke="NewChargesInfo_ClaimGuid"
           filter="Status!Canceled">
          <control type="button" name="refreshAllCharges" action="trigger" trigger="patientcharges" label="Update"	 icon="refresh" target=""/>           
          <control type="button" name="ReverseCharge"             
            showif="feature"
            action="save" 
            label="Revert"	 
            icon="exchange"             
            confirm="Please confirm you want to reverse this charge."	
            affector="none"  
            acctsvc="true"        
            datainsert="ReversePatientCharge"
            appendinsert="TransactionGuid=[[TransactionGuid]]"
            provoke="patientcharges"/> 
        </control>         

        <control type="datagrid" label="Patient Payments"	 name="patient_payments" span="12"
          rows="5" fitrows="true"
          option="Payments"
          modalname="newpatientreceipts"
          dependent="visitselect"
          idle="[visitselect]="
          acctsvcreq="true"
          appendrequest="patientVisit=[visitselect]"
          appendinsert="patientId=[searchselect],patientVisit=[visitselect],invoiceNumber=[visitdata_InvoiceNumber],Type=Payment"
          appendupdate="patientId=[searchselect],patientVisit=[visitselect]"
          datarequest="GetPayerReceiptsByPatientVisit"
          datainsert="InsertPayorReceiptAgainstInvoice"
          dataupdate="UpdatePayorReceiptAgainstInvoice"
          source="ReceiptDate,ReceiptNumber,ReceiptTypeDescription,ReferenceNumber,ReceiptNotes,AmountPaid"
          sourcelabels="Payment Date,Payment Number,Type,Reference,Notes,Tax"	
          align="left|left|left|left|right"
          total="|||||+"
          format="datetime|||||0,000.00"
          key="ReceiptGuid"
          sort="ReceiptDate=desc"
          filter="ClaimNumber«1"  
          provoke="newpatientreceipts_CardTypeOptions,newpatientreceipts_CardLabelOptions,newpatientreceipts_ReceiptType">         
          <control type="button" name="refreshPatientReceipts" action="trigger" trigger="patient_payments" label="Update"	 icon="refresh" target=""/>
          <control type="button" name="ReversePatientReceipt" 
            showif="feature"
            action="save" 
            label="Revert"	 
            icon="exchange"             
            confirm="Please confirm you want to reverse this patient receipt."	
            affector="none"  
            acctsvc="true"        
            datainsert="ReversePayorReceiptAgainstInvoice"
            appendinsert="ReceiptGuid=[[ReceiptGuid]]"
            provoke="patient_payments"/>
        </control>

        <control type="datagrid" label="Payer Payments"	 name="payer_payments" span="12"
          rows="5" fitrows="true"
          option="Payments"
          modalname="newpayerreceipts"
          dependent="visitselect"
          idle="[visitselect]="
          acctsvcreq="true"
          appendrequest="patientVisit=[visitselect]"
          appendinsert="patientId=[searchselect],patientVisit=[visitselect],invoiceNumber=[visitdata_InvoiceNumber],Type=Payment"
          appendupdate="patientId=[searchselect],patientVisit=[visitselect]"
          datarequest="GetPayerReceiptsByPatientVisit"
          datainsert="InsertPayorReceiptAgainstInvoice"
          dataupdate="UpdatePayorReceiptAgainstInvoice"
          source="ReceiptDate,ReceiptNumber,ReceiptTypeDescription,ReferenceNumber,ClaimNumber,Payor,ReceiptNotes,AmountPaid,FinalPaymentForClaim"
          sourcelabels="Payment Date,Payment Number,Type,Reference,Request Number,Payer,Notes,Tax,Final"	
          align="|left|left|left|left|left|left|right||"
          total="|||||||+||"
          format="datetime|||||||0,000.00|boolean|"
          key="ReceiptGuid"
          sort="ReceiptDate=desc"
          filter="ClaimNumber»0"
          provoke="newpayerreceipts_PayorGuid,patientinvoiceclaims,newpayerreceiptsinfo_CardTypeOptions,newpayerreceiptsinfo_CardLabelOptions">           
          <control type="button" name="refreshPayerReceipts" action="trigger" trigger="payer_payments" label="Update"	 icon="refresh" target=""/>
          <control type="button" name="ReversePayerReceipt" 
            showif="feature"
            action="save" 
            label="Revert"	 
            icon="exchange"             
            confirm="Please confirm you want to reverse this receipt from the payer."	
            affector="none"  
            acctsvc="true"        
            datainsert="ReversePayorReceiptAgainstInvoice"
            appendinsert="ReceiptGuid=[[ReceiptGuid]]"
            provoke="payer_payments"/>
        </control>

      <control type="datagrid" label="Payer Requests"	 name="payerclaims" span="12"
          rows="5" fitrows="true"
          option="PayerClaims"
          modalname="newclaims"
          dependent="visitselect"
          idle="[visitselect]="
          acctsvcreq="true"
          appendrequest="patientVisit=[visitselect]"
          appendinsert="patientGuid=[searchselect],patientVisit=[visitselect],patientInvoiceGuid=[visitselect],procedureGuid=[OrderGuid]"
          appendupdate="procedureGuid=[OrderGuid]"
          datarequest="GetPayerClaimsByPatientVisit"
          datainsert="InsertPayerClaim"
          dataupdate="UpdatePayerClaim"
          source="ClaimDate,ClaimNumber,ClaimAuthorization,Status,Payer,Contact,PhoneNumber,Cell,Fax,AnticipatedAmount,Notes"
          sourcelabels="Date,Request Number,Authorization,Status,Payer,Contact,Phone,Cell,Fax,Tax,Notes"	  
          translate="Status"                   
          key="ClaimGuid"
          align="||left|left|left|left|left|left|left|right|left|"
          total="|||||||||+|"
          format="datetime|||||||||0,000.00||"
          trigger="newclaims_PayerGuid,NewChargesInfo_ClaimGuid,patientcharges"
          provoke="OrderDescription">
          <control type="button" name="refreshPayerClaims" action="trigger" trigger="payerclaims" label="Update"	 icon="refresh" target="" />
          </control>

       </control>   
       </row>
      </subset> 
     </group>

  <group name="ClinicalGridGroup" reveal="visitselect!">      
      <row divider="true">
        <!-- <control type="header" align="left" span="3">Clinical Information</control>  -->
        <control type="buttongroup" 
          name="ButtonGroupSelect1" 
          edit="true" 
          persist="true"
          source="Physicians,Problems,Labs,Imaging,Procedures,Medication,EREcdForms"            
          sourcelabels="Physicians,Problems,Laboratories,Images,Procedures,Medication,Documents"	 
          span="12" 
          default="Physicians" 
            
          provoke="ERGridList,ERProblemList,ERPhysicianAssignments,ERLabOrders,ERLabResults,ERMedications,ERImagingOrders,ERImagingResults,EREcdForms,New_ScannedForms,ERHomeMedications,ERProcedures"/>          
      </row>

      <row>
        <control name="ERGridList" affector="ButtonGroupSelect1" type="options" span="12">
         <control type="datagrid" label="Problems"	 name="ERProblemList" 
          option="Problems"
          persist="true"
          span="12"
          rows="4"
          fitrows="true"
          datarequest="GetPatientProblemsWithRelatedSymptomsByVisit"
          appendrequest="patientId=[searchselect],patientVisit=[visitselect]"
          source="DateTimeEntered,ProblemType,ProblemDescription,ProblemNoteText,EnteredByFullName"
          sourcelabels="Date/Time,Type,Description,Note,Ingested by"	
          align="left||left|left|left|left"
          format="datetime|boolean"
          sort=""
          translate="ProblemType"
          key="ProblemGuid"/>

         <control type="datagrid" label="Physicians"	 name="ERPhysicianAssignments" 
          option="Physicians"
          persist="true"
          span="12"
          rows="4"
          fitrows="true"
          datasource=""
          datarequest="GetPhysicianAssignmentsByPatientVisit"
          appendrequest="patientVisit=[visitselect],patientId=[searchselect]"
          source="EnteredDateTime,ProviderType,ProviderFullName"
          sourcelabels="Date/Time,Type,Doctor"	
          translate="ProviderType"
          align="left|left|left|left"
          format="datetime"
          sort="EnteredDateTime=desc"
          key="rowguid"/> 

         <control type="datagrid" label="Laboratory Orders"	 name="ERLabOrders"
          option="Labs"
          persist="true"
          span="12"
          rows="4"
          fitrows="true"          
          datarequest="GetPatientLabTestOrdersByPatientVisit"
          appendrequest="patientId=[searchselect],patientVisit=[visitselect]"
          source="DateTimeOrdered,DateTimeScheduled,OrderNumber,CPTDescription,OrderInstructions,Status,OrderedByFullName"
          sourcelabels="Date/Time,Scheduled,Number,Description,Instructions,Status,Ordered by"	
          align="left|left|left|left|left|left|left"
          format="datetime|datetime|"
          sort="DateTimeOrdered=asc"
          translate="Status"
          key="OrderGuid"/>

         <!-- <control type="datagrid" label="Lab Results" name="ERLabResults"
          option="Labs"
          persist="true"
          span="12"
          rows="4"
          fitrows="true"
          datarequest="GetPatientLabTestResultsByPatientVisit"
          appendrequest="patientId=[searchselect],patientVisit=[visitselect]"
          source="DateTimeOfTest,TestName,TestResultPlusUnit,NormalRange,AbnormalFlag"
          sourcelabels="Date/Time,Test,Results,Normal Range,Abnormal"
          align="left|left|left|left|left|left"
          format="datetime"
          sort="TestName=asc"
          key="TestOrderId"/> -->

         <control type="datagrid" label="Hospitalized Patients Medications"	 
          name="ERMedications"
          option="Medication"
          filter="Type=InPatient Order" 
          persist="true"
          span="12"
          rows="4"
          fitrows="true"
          datarequest="GetPatientMedications"
          appendrequest="patientVisit=[visitselect],patientId=[searchselect]"
          source="DateStarted,OrderNumber,Type,MedsTradeName,Frequency,MedsRoute,DesiredDoseValue,DoseUnit,Status,OrderedByFullName"
          sourcelabels="Date Started,Number,Type,Medication,Frequency,Route,Dosage,Unit,Status,Ordered by"	
          align="left|left|left|left|left|left|left|left|left|left"
          format="datetime|"
          sort="DateStarted=desc"
          translate="Type,Status"
          key="rowguid"/>

         <control type="datagrid" label="Outpatient Medications"	 
          name="ERHomeMedications"
          option="Medication"
          filter="Type=Home Medication" 
          persist="true"
          span="12"
          rows="4"
          fitrows="true"
          datarequest="GetPatientMedications"
          appendrequest="patientVisit=[visitselect],patientId=[searchselect]"
          source="DateStarted,Type,MedsTradeName,Frequency,MedsRoute,Status,OrderedByFullName"
          sourcelabels="Date Started,Type,Medications,Frequency,Route,Status,Ordered by"	
          align="left|left|left|left|left|left|left|left"
          format="datetime|datetime"
          translate="Type,Status"
          sort="DateStarted=desc"
          key="rowguid"/>
          
         <control type="datagrid" label="Imaging Orders"	 name="ERImagingOrders"
          option="Imaging"
          persist="true" 
          span="12"
          rows="4"
          fitrows="true"
          datarequest="GetPatientImagingOrdersByPatientVisit"
          appendrequest="patientVisit=[visitselect]"
          source="DateTimeEntered,OrderNumber,OrderPriority,ImagingOrderDescription,OrderStatus,EnteredByFullName"
          sourcelabels="Date/Time,Number,Priority,Description,Status,Ordered by"	
          align="left|left|left|left|left|left"
          format="datetime"
          sort="Status=asc"
          translate="OrderPriority,OrderStatus"
          key="ImagingOrderGuid"/>

         <control type="datagrid" label="Procedures"	 name="ERProcedures"
          option="Procedures"
          persist="true"
          span="12"
          rows="4"
          fitrows="true"
          datarequest="GetPatientProceduresByPatientVisit"
          appendrequest="patientVisit=[visitselect]"
          source="DateTimeEntered,OrderNumber,ProcedureDescription,ProcedureObjective,ProcedureStatus,SignedBy,PerformedBy"
          sourcelabels="Date/Time,Number,Description,Target,Status,Ordered By,Interpreted By"	
          align="left|left|left|left|left|left|left"
          format="datetime"
          sort="ReportDateTimes=desc"
          translate="ProcedureStatus"
          key="ProcedureGuid"/>

          <!-- datarequest="GetCompletedPatientFormsForPriorVisits" 
               filter="MostRecent=true" -->
          <!-- datarequest="GetCompletedPatientFormsByPatientVisit" -->
          <!-- datarequest="GetMostRecentVersionCompletedPatientFormsByPatientVisit" -->

         <control type="datagrid" label="Documents for the visit under review"	 name="EREcdForms"
          option="EREcdForms"
          edit="only"
          span="12"
          rows="4"
          fitrows="true"          
          action="redirect|url" 
          target="ecd/index.html"
          usesource="login"
          append="ecdGuid=[[rowGuid]],patientid=[searchselect],patientvisit=[visitselect],ecdMode=review,department=[DepartmentGuidLookup]" 
          datarequest="GetCompletedPatientFormsByPatientVisit"
          appendrequest="patientId=[searchselect],patientVisit=[visitselect]"
          filter="MostRecent=true"
          source="DateTimeEntered,RevisionId,Type,FormName,FullUserName"
          sourcelabels="Date/Time,Revision,Type,Title (click on the title to review),Signed by"	
          align="left|left|left|left|left"
          format="datetime"
          sort="DateTimeEntered=desc"
          key="rowGuid"
          trigger="ButtonGroupSelect">       
            <control type="button" 
              name="printECD2" 
              action="print"
              usesource="login" 
              mode="ecd" 
              showif="feature"
              append="ecdGuid=[[rowGuid]],patientid=[searchselect],patientvisit=[visitselect],department=[DepartmentGuidLookup]"
              label="Print Document"	
              icon="print"/>  
         </control>   

         <control type="datagrid" 
            label="Scanned Documents for all Visits"	 
            name="New_ScannedForms"
            option="EREcdForms"
            edit="only"
            span="12"           
            rows="4"
            fitrows="true"
            filter="Category!Mobile"            
            datarequest="GetPatientImages"
            appendrequest="patientId=[searchselect]"
            source="DateEntered,VisitNumber,AdmitDateTime,Category,FileName,Note"
            sourcelabels="Date/Time,Visit ID,Enter Date,Category,File Name,Notes"	
            align="left|left|left|left|left|left"
            format="datetime||datetime"
            translate="Category"
            sort="DateEntered=desc"
            key="RecId"
            action="redirect|url" 
            target="printables/uploadviewer.html" 
            usesource="login"
            append="fileGuid=[[PhotoGuid]],fileType=[[FileType]]">
              <!-- Upload scanned documents -->
              <control type="button" 
              name="New_ScanDocuments" 
              label="Scan Documents"	 
              icon="folder-open"
              append="patientId=[searchselect],patientvisit=[visitselect]"
              action="upload" 
              filter="pdf,jpg,jpeg"
              provoke="New_ScannedForms"/>
          </control>
        </control>                    
       </row>            
     </group>
  </section>  

  <section type="modal" name="NewAppointment" title="Patient Appointment"	 size="small">
    <group name="NewAptMod_AppointmentInfo">
      <row>
        <control type="hidden" name="NewAptMod_SchedulerTimesGuid"/>
      </row>
      <row>
        <control type="label" label="Calendar"		 span="2"/>
        <control type="select" 
          name="NewAptMod_AppointmentTypeGuid" span="3" 
          datasource="GetSchedulerAppointmentTypesByFacility" 
          source="CalendarName,CalendarGuid"
          filter="Active=true"
          explicit="true"
          default="Billing Appointments"
          required="true" />
        <control type="label" label="Scheduled"	 align="right" span="2" />
        <control type="datetime" 
          name="NewAptMod_Start" 
          required="true"
          edit="true"            
          span="3" />        
      </row>
      <row>
        <control type="label" label="Physician"		 span="2" />      
        <control type="select" span="3"
            name="NewAptMod_ProviderId" 
            edit="true" 
            explicit="true"
            acctsvc="true"
            source="FullName,UserId" 
            append="LocationId=(facilityData.LocationId),role=Physician"
            datasource="GetUsersByAttributes"/>            
        <control type="label" label="Reminder"	 span="2" />
        <control type="select" name="NewAptMod_ReminderTypeId" span="3" 
          source="1,2,3,4" 
          sourcelabels="Text,Email,Phone,None"	 
          default="1"
          edit="true"
          />
      </row>
      <row>
        <control type="label" label="Reason"	 span="2"/>
        <control type="text" name="NewAptMod_Subject" edit="true" required="true" span="3" value="Account Overdue"/>
        <control type="label" label="State"	 span="2" />
        <control type="select" name="NewAptMod_Status" span="3"
          source="Scheduled,Confirmed,Completed,No Show,Canceled"
          sourcelabels="Scheduled,Confirmed,Completed,No Show,Canceled"	
          default="Scheduled" required="true" edit="true" />
      </row>
      <row>
        <control type="label" label="Description"	 align="right" span="2"/>
        <control type="text" name="NewAptMod_Description" edit="true" span="8" value="Discuss account balance"/>
      </row>
      <row>
        <control type="label" label="Service"	 align="right" span="2" />
        <control type="select" name="NewAptMod_Service" span="3" 
          datasource="GetSchedulerServicesByFacility" 
          source="ServiceDescription|DefaultDurationMinutes,ServiceGuid" 
          edit="true"
          default="Account Discussions"
          />
        <control type="label" label="Location"			 align="right" span="2" />
        <control type="select" name="NewAptMod_RoomGuid" span="3" 
          datasource="GetSchedulerRoomsByFacility" 
          source="RoomName,RoomGuid" 
          edit="true"
          />
      </row>
    </group>
  </section>
  
  <section type="modal" title="Billing Note"	 name="newbillingnote" size="small">
    <group> 
      <row> 
        <control type="label" span="2" label="Note Type"	/> 
        <control type="select" name="NoteType" readonly="true"  
             span="3"
             default="true"
             source="Billing Note"
             sourcelabels="Billing Note"	/>            
      </row>
      <row>
        <control type="label" span="2" label="Note"	/>        
        <control type="textarea" name="NursingNote" span="8" rows="8" edit="false" />          
      </row>      
    </group>
  </section> 

  <section type="modal" title="Charge"	 name="newCharge" provoke="refreshAllCharges" size="small"
      enteredby="EnteredByFullName" updatedby="LastUpdatedByFullName"
      dtentered="DateTimeEntered" dtupdated="DateTimeLastUpdated">
    <group name="NewChargesSelect">      
      <row>
        <control type="label" label="Name"	 span="2"/>
        <control type="choose" name="itemselect" span="10"
          source="ItemName,ItemMasterGuid"
          acctsvc="true"
          acctsvcreq="true"
          datasource="GetItemMasterItemsBySearchCriteria"
          term="searchCriteria"
          datarequest="GetItemByItemGuid"
          appendrequest="itemMasterGuid=[itemselect],patientId=[searchselect]"
          inject="NewChargesInfo|passive,NewChargesSelect|passive"
          showif="add"
          edit="add" 
          required="true"/>
        <control type="text" showif="edit" name="ItemName" span="10" />
        <control type="hidden" name="ItemMasterGuid"/>                                    
      </row>
    </group>   
    
    <group name="NewChargesInfo">       
      <row>
        <control type="label" span="2" label="Description"	/>
        <control type="text" span="10" name="ItemDescription" readonly="true" />
      </row>     

      <row>        
        <control type="label" span="2" label="Number"	/>
        <control type="text" span="4" name="ItemNumber" readonly="true" />
        <control type="label" span="2" label="Category"			/>
        <control type="select" span="4" 
            injectname="Category" name="ItemCategory" readonly="true" 
            acctsvc="true"
            datasource="GetItemMasterCategoriesByFacilityActive" 
            source="CategoryDescription,ItemCategoryGuid"
            />
      </row>
      
      <row>                
        <control type="label" span="2" label="Revenue Code"	/>
        <control type="text" span="2" injectname="RevCode" name="RevenueCode" readonly="true" />
        <control type="text" span="8" name="RevenueCodeDescription" readonly="true" />          
      </row>

      <row>   
        <control type="hidden" label="Item Type"	 span="2"/>
        <control type="hidden" span="4" injectname="TypeName" name="ItemType" readonly="true" />  
        <control type="hidden" label="Alt Code Vocab"		 span="2"/>
        <control type="hidden" span="4" injectname="CodeVocabulary" name="ItemAltCodeVocabulary" readonly="true" />
        <control type="hidden" span="2" label="Alternate Code"	/>
        <control type="hidden" span="4" injectname="Code" name="ItemAlternateCode" readonly="true" />          
        <control type="hidden" span="4" injectname="Code" name="ChargeCode" readonly="true" />      
      </row>

      <row divider="true">
        <control type="label" label="Date of Charge"	 span="2"/>
        <control type="datetime" span="4" name="TransactionDateTime" required="true" default="now" />              
        <control type="label" label="Request #"	 span="2"/>
        <control type="select" span="4" 
            explicit="true"
            acctsvc="true"             
            edit="true"
            append="patientVisit=[visitselect]"
            name="NewChargesInfo_ClaimGuid" 
            set="NewChargesInfo_ClaimNumber=[[ClaimNumber]]"
            source="ClaimNumber|PayerName,ClaimGuid" 
            datasource="GetPayerClaimsByPatientVisit"   
            filter="Status!Canceled"/>
        <control type="hidden" name="NewChargesInfo_ClaimNumber" span="2"/>          
      </row>
            
      <row>
        <control type="label" span="2" label="Department"			/>
        <control type="select" span="4" acctsvc="true" name="DepartmentGuid" source="DepartmentName,DepartmentGuid" datasource="GetDepartmentsActive" edit="true" />
        <control type="label" label="Physician"		 span="2"/>         
        <control type="select" span="4"
            name="ChargePhysician" 
            edit="true" 
            explicit="true"
            acctsvc="true"
            source="FullName,UserId" 
            append="LocationId=(facilityData.LocationId),role=Physician"
            datasource="GetUsersByAttributes"/>          
      </row>
      
      <row>   
        <control type="hidden" label="Place of Service"	 span="2"/>
        <control type="hidden" span="4" name="PlaceOfService" sourcelabels="Emergency Room: Hospital,Hospitalization,Outpatient"	 source="23,21,22" edit="true" />     
        <control type="hidden" span="2" label="Location"			/>
        <control type="hidden" span="4" acctsvc="true" name="SourceLocation" source="LocationName,LocationId" datasource="GetInventoryLocationsForThisFacility" />     
      </row>            
      
      <row>
        <control type="hidden" label="Start Date"	 span="2"/>
        <control type="hidden" span="4" name="ChargePhysicianStartDateTime" />
        <control type="hidden" label="End Date"	 span="2"/>
        <control type="hidden" span="4" name="ChargePhysicianEndDateTime" />
      </row>

      <row>
        <control type="label" span="11" label=""/>       
      </row>

      <row name="NewChargesInfo_ChargeLineInsert" reveal="[TransactionGuid]=">        
        <control type="label" label="Price"	 span="2"/>       
        <control type="text" injectname="BasePrice" name="ChargeLineInsert_PerItemChargeAmount" span="2" default="0.00" format="0,000.00" readonly="true" />
        <control type="label" label="Quantity"	 span="2"/>
        <control type="text" span="1" name="ChargeLineInsert_TransactionQuantity" default="1.00" format="0,00.00" required="true" />
        <control type="select" injectname="ConsumedUOM" name="ChargeLineInsert_UnitOfMeasure" 
           span="2" default="Each" 
           source="UnitOfMeasure,UOMGuid"
           datasource="GetUnitsOfMeasure"
           acctsvc="true"
           readonly="true" />
        <control type="label" label="Total"		 span="1"/>
        <control type="calc" name="ChargeLineInsert_TotalChargeAmount" span="2" format="0,000.00"  readonly="true" source="ChargeLineInsert_TransactionQuantity*ChargeLineInsert_PerItemChargeAmount"/>
      </row>

      <row name="NewChargesInfo_ChargeLineUpdate" reveal="[TransactionGuid]!">        
        <control type="label" label="Price"	 span="2"/>       
        <control type="text" name="ChargeLineUpdate_PerItemChargeAmount" span="2" format="0,000.00" readonly="true" />
        <control type="label" label="Quantity"	 span="2"/>
        <control type="text" span="1" name="ChargeLineUpdate_TransactionQuantity" format="0,000.00" required="true" />
        <control type="text" name="ChargeLineUpdate_UnitOfMeasure" span="2" readonly="true" />
        <control type="label" label="Total"		 span="1"/>
        <control type="text" name="ChargeLineUpdate_TotalChargeAmount" span="2" format="0,000.00" readonly="true"/>
      </row>

      
      <row>
        <control type="label" label="Notes"	 span="2"/>
        <control type="textarea" name="TransactionNote" rows="2" span="10" edit="true" />
        <control type="hidden" name="TransactionGuid"/>
        <control type="hidden" name="ExternalId1"/>           
      </row>
    </group>
  </section>  

  <section type="modal" title="Payer Claim"	 name="newclaims" 
    enteredby="EnteredByFullName" updatedby="LastUpdatedByFullName" 
    dtentered="DateTimeEntered" dtupdated="DateTimeLastUpdate">
    <group name="NewClaimsInfo">
      
      <row>
        <control type="label" label="Request Number"	 span="3"/>
        <control type="text" name="ClaimNumber" readonly="true" span="3" />
      </row>
      
      <row>
        <control type="label" label="Payer"	 span="3"/>
        <control type="select" name="newclaims_Payer,newclaims_PayerGuid" span="3" required="true" edit="true"
          explicit="true"
          source="PayerName,PatientPayerGuid"
          datasource="GetPatientPayersActive"
          append="patientId=[searchselect]"
          usesource="true" inject="NewClaimsInfo2|passive"
          />
        <control type="label" label="State"	 span="1"/>
        <control type="select" name="Status" required="true" sourcelabels="Pending,Sent,Ordered,Canceled"	 source="Pending,Submitted,Settled,Canceled" edit="true" span="3" default="Pending" />
      </row>
       <row>
        <control type="label" label="Order Type"	 span="3"/>
        <control type="select" name="OrderType" sourcelabels="Image,Laboratory,Procedure"	 source="Imaging,Laboratory,Procedure" trigger="OrderDescription" edit="true" span="3" />
        <control type="label" label="Order"	 span="1"/>
        <control type="select" name="OrderDescription" span="3" edit="true"   
          source="OrderDescription,OrderDescription"
          datasource="GetPatientVisitOrdersActive"
          append="patientVisit=[visitselect],orderType=[OrderType]" 
          explicit="true"            
          />
          <control type="hidden" name="OrderGuid" />
      </row>
    </group>   
    
    <group name="NewClaimsInfo2">
      <row>
        
        <control type="label" label="Contact"	 span="3"/>
        <control type="text" injectname="PayerContact" name="newclaims_Contact" edit="true" span="3" />
        <control type="label" label="Phone"	 span="1"/>
        <control type="text" injectname="PayerPhone" name="newclaims_PhoneNumber" edit="true" span="3" />
      </row>
      <row>
        <control type="label" label="Cell Phone"	 span="3"/>
        <control type="text" injectname="PayerCell" name="Cell" edit="true" span="3" />
        <control type="label" label="Fax"		 span="1"/>
        <control type="text" injectname="PayerFax" name="Fax" edit="true" span="3" />
      </row>
      <row>
        
        <control type="label" label="Email"			 span="3"/>
        <control type="text" injectname="PayerEmail" name="Email" verify="email" edit="true" span="3" />
        <control type="label" label="Auth"		 span="1"/>
        <control type="text" name="ClaimAuthorization" edit="true" span="3" />
      </row>
      
      <row>
        <control type="label" label="Date"	 span="3"/>
        <control type="datetime" name="ClaimDate" edit="true" span="3" default="now" />
      </row>
      <row>
        <control type="label" label="Advance"	 span="3"/>
        <control type="text" name="AnticipatedAmount" format="0,000.00" default="0.00" edit="true" span="3" />
      </row>
      <row>
        <control type="label" label="Notes"	 span="3"/>
        <control type="textarea" span="8" name="newclaims_Notes" edit="true" rows="2" />
      </row>
    </group>
  </section>
  
  <section type="modal" title="Patient Payment"	 name="newpatientreceipts" size="small"
      enteredby="EnteredByFullName" updatedby="LastUpdatedByFullName"
      dtentered="DateTimeEntered" dtupdated="DateTimeUpdated">
    <group name="newpatientreceiptsInfo">
      
      <row>
        <control type="label" label="Number"	 span="2"/>
        <control type="text" name="newpatientreceipts_ReceiptNumber" span="3" readonly="true" />
        <control type="label" label="Payment Date"	 span="2"/>
        <control type="datetime" span="3" required="true" name="newpatientreceipts_ReceiptDate" default="now" />
      </row>
     
      <row>
        <control type="label" label="Type"			 span="2"/>
        <control type="select" name="newpatientreceipts_ReceiptType" 
          explicit="true"          
          sort="PaymentTypeCode=asc"         
          filter="PaymentTypeCode!POS"        
          acctsvc="true"
          acctsvcreq="true"
          datasource="GetPaymentTypesActive"
          source="PaymentTypeCode|Description,PaymentTypeCode"
          required="true" span="3" 
          provoke="newpatientreceipts_CardTypeOptions,newpatientreceipts_CardLabelOptions"/>
        <control type="options" name="newpatientreceipts_CardLabelOptions" affector="newpatientreceipts_ReceiptType" span="2">
          <control type="label" label="Card Type"	 option="CRC,DBC"/>
          <control type="label" label="Insurer"	 option="VOU"/>
        </control>
        <control type="options" name="newpatientreceipts_CardTypeOptions" affector="newpatientreceipts_ReceiptType" span="3">
          <control type="select"
            name="newpatientreceipts_CardType" 
            option="CRC,DBC"
            source="Amex,Visa,Master"
            default="Visa"
            />
          <control type="select"
            name="newpatientreceipts_Payor,newpatientreceipts_PayorGuid" 
            option="VOU"
            acctsvc="true"
            datasource="GetPayers"
            source="PayerName,PayerGuid"            
            />
        </control>  
      </row>

      <!-- filter="PaymentTypeCode!POS,PaymentTypeCode!ACH,PaymentTypeCode!ADJ"  -->

      <row>
        <control type="label" label="Reference"	 span="2"/>
        <control type="text" name="newpatientreceipts_ReferenceNumber" required="true" span="3" />
        <control type="label" label="Amount"		 span="2"/>
        <control type="text" name="newpatientreceipts_AmountPaid" format="0,000.00" default="[VisitInvoiceBalance]" required="true" span="3"/>
      </row>

      <row>
        <control type="label" label="Notes"	 span="2"/>
        <control type="textarea" name="newpatientreceipts_ReceiptNotes" rows="2" edit="true" span="8" />
        <control type="hidden" name="newpatientreceipts_ReceiptGuid"/>       
      </row>
    </group>
  </section>

  <section type="modal" title="Payer Payment"	 name="newpayerreceipts" size="small"
      enteredby="EnteredByFullName" updatedby="LastUpdatedByFullName"
      dtentered="DateTimeEntered" dtupdated="DateTimeUpdated">
    <group name="newpayerreceiptsinfo">
      <!-- <control type="select" name="newpayerreceiptsinfo_ClaimGuid" namefield="newpayerreceiptsinfo_ClaimNumber" span="3" edit="true" -->
      <row>
        <control type="label" label="Number"	 span="2"/>
        <control type="text" name="newpayerreceipts_ReceiptNumber" span="3" readonly="true" />
        <control type="label" label="Payment Date"	 span="2"/>
        <control type="datetime" span="3" required="true" name="newpayerreceipts_ReceiptDate" default="now" />
      </row>

      <row>
        <control type="label" label="Payer"	 span="2"/>
        <control type="select" name="newpayerreceipts_Payor,newpayerreceipts_PayorGuid" span="3" edit="true" required="true" 
          explicit="true"         
          source="PayerName,PatientPayerGuid"
          datasource="GetPatientPayersActive"
          append="patientId=[searchselect]"
          usesource="true" 
          trigger="newpayerreceipts_ClaimGuid"/>
        <control type="label" label="Request #"	 span="2"/>    
        <control type="select" name="newpayerreceipts_ClaimNumber,newpayerreceipts_ClaimGuid" span="3" edit="true" required="true"
          explicit="true"
          source="ClaimNumber,ClaimGuid"
          acctsvc="true"
          acctsvcreq="true"
          datasource="GetPayerClaimsByPatientVisitAndPayer"
          append="patientVisit=[visitselect],payerGuid=[newpayerreceipts_PayorGuid]"
          usesource="true" 
          filter="Status!Canceled"
          />
      </row>
      
      <row>
        <control type="label" label="Type"			 span="2"/>
        <control type="select" name="newpayerreceipts_ReceiptType" 
          explicit="true"                     
          sort="PaymentTypeCode=asc"
          filter="PaymentTypeCode!POS"         
          acctsvc="true"
          acctsvcreq="true"
          datasource="GetPaymentTypesActive"
          source="PaymentTypeCode|Description,PaymentTypeCode"
          required="true" span="3" 
          provoke="newpayerreceiptsinfo_CardTypeOptions,newpayerreceiptsinfo_CardLabelOptions"/>
        <control type="options" name="newpayerreceiptsinfo_CardLabelOptions" affector="newpayerreceipts_ReceiptType" span="2">
          <control type="label" label="Card Type"	 option="CRC,DBC"/>
          <control type="label" label="Insurer"	 option="XXX"/>
        </control>
        <control type="options" name="newpayerreceiptsinfo_CardTypeOptions" affector="newpayerreceipts_ReceiptType" span="3">
          <control type="select"
            name="newpayerreceiptsinfo_CardType" 
            option="CRC,DBC"
            source="Amex,Visa,Master"
            default="Visa"
            />
          <control type="select"
            name="newpayerreceiptsinfo_Payor,newpayerreceiptsinfo_PayorGuid" 
            option="XXX"
            acctsvc="true"
            datasource="GetPayers"
            source="PayerName,PayerGuid"            
            />
        </control>          
      </row>

      <row>
         <control type="label" label="Reference"	 span="2"/>
         <control type="text" name="newpayerreceipts_ReferenceNumber" required="true" span="3" />
      </row>

      <row>
        <control type="label" label="Amount"		 span="2"/>
        <control type="text" name="newpayerreceipts_AmountPaid" format="0,000.00" default="[VisitInvoiceBalance]" required="true" span="3"/>
        <control type="label" label="Final Payment by Request"	 span ="3"/>
        <control type="buttongroup" name="newpayerreceipts_FinalPaymentForClaim" span="2" sourcelabels="Yes,No"	 source="True,False" default="False" edit="true" />        
      </row>

      <row>
        <control type="label" label="Notes"	 span="2"/>
        <control type="textarea" name="newpayerreceipts_ReceiptNotes" rows="2" edit="true" span="8" />
        <control type="hidden" name="newpayerreceipts_ReceiptGuid"/>       
      </row>

    </group>
  </section>
  
  <section type="tab" badge="none" name="mdlReports" title="Reports"	 size="small" trigger="ReportList" >
  <group>
      <row>
      <control type="hidden" name="Report_PatientId"/>
      <control type="hidden" name="Report_SessionGuid"/>
      <control type="hidden" name="Report_CalendarGuid"/>
      <control type="hidden" name="Report_PatientFirstName"/>
      <control type="hidden" name="Report_PatientMiddleName"/>
      <control type="hidden" name="Report_PatientLastName"/>
      <control type="hidden" name="ReportSelected"/>
      <control type="hidden" name="Report_Type" default="Financial"/>
      <control type="hidden" name="Report_ReportId"/>
      <control type="hidden" name="StartDateParameter"/>
      <control type="hidden" name="EndDateParameter"/>
      <control type="hidden" name="StartDateTimeParameter"/>
      <control type="hidden" name="EndDateTimeParameter"/>
      <control type="hidden" name="PatientParameter"/>
      <control type="hidden" name="VisitParameter"/>
      <control type="hidden" name="DepartmentParameter"/>
      <control type="hidden" name="PhysicianParameter"/>
      <control type="hidden" name="UserParameter"/>
      <control type="hidden" name="StartPeriodParameter"/>
      <control type="hidden" name="EndPeriodParameter"/>
      <control type="hidden" name="LedgerAccountParameter"/>
    </row>
  </group>
  <group>
    <row>
      <control type="datagrid"
        name="ReportList"
        label="Reports"	
        rows="15"
        span="12"
        action="redirect"
        target="mdlReportCriteria"
        filter="Active=true"
        acctsvcreq="true"
        datarequest="GetLookupReportItems"
        
        source="ReportType,ReportName,ReportDescription"
        sourcelabels="Type,Report,Description"	
        translate="ReportType"
        align="left|left|left"
        sort="ReportName=asc"
        key="ReportItemGuid"
        onselectset="ReportSelect_PatientFirstName=[Report_PatientFirstName],ReportSelect_PatientMiddleName=[Report_PatientMiddleName],
        ReportSelect_PatientLastName=[Report_PatientLastName],ReportSelect_PatientId=[Report_PatientId],ReportSelected=[[ReportItemGuid]],
        Report_ReportName=[[ReportName]],Report_ReportDescription=[[ReportDescription]],Report_ReportId=[[ReportFileName]],StartDateParameter=[[StartParameter]],
        EndDateParameter=[[EndParameter]],StartDateTimeParameter=[[StartTimeParameter]],EndDateTimeParameter=[[EndTimeParameter]],PatientParameter=[[PatientParameter]],
        VisitParameter=[[VisitParameter]],DepartmentParameter=[[DepartmentParameter]],PhysicianParameter=[[PhysicianParameter]],UserParameter=[[UserParameter]],
        SessionGuid=[[Report_SessionGuid]],StartPeriodParameter=[[StartPeriodParameter]],EndPeriodParameter=[[EndPeriodParameter]],
        LedgerAccountParameter=[[LedgerAccountParameter]]"
        onselect="Report_PatientVisitId"/>
    </row>
  </group>
</section>

<section type="tabmodal" badge="none" name="mdlReportCriteria" title="Report Criteria"	 size="small" >
  <group>
    <row name="rowPatientNames" reveal="PatientParameter=true">
      <control type="label" label="Patient"			 span="2"/>
      <control type="text" name="ReportSelect_PatientFirstName" span="3" readonly="true"/>
      <control type="text" name="ReportSelect_PatientMiddleName" span="3" readonly="true"/>
      <control type="text" name="ReportSelect_PatientLastName" span="3" readonly="true"/>
    </row>
    <row>
      <control type="label" label="Report"	 span="2"/>
      <control type="text" name="Report_ReportName" span="9" readonly="true"/>
    </row>
  </group>
  <group name="grpReportCriteria">
    <row>
      <control type="hidden" name="ReportSelect_PatientId"/>
    </row>
    <row name="rowVisitIdParameter" reveal="VisitParameter=true">
      <control type="label" label="Visit"	 span="2"/>
      <control type="select" name="Report_PatientVisitId" span="4" 
        datarequest="GetPatientVisitsByFacilityAndPatient"
        appendrequest="patientId=[ReportSelect_PatientId]"
        required="true"
        default="true" 
        explicit="true"
        format="date"
        sort="AdmitDateTime=desc"
        source="AdmitDateTime,PatientVisitUniqueId"/>
    </row>
    <row name="rowStartDateParameter" reveal="StartDateParameter=true">
      <control type="label" label="Start Date"	 span="2" />
      <control type="date" name="Report_StartDate" span="4" default="now" required="true" />
    </row>
    <row name="rowEndDateParameter" reveal="EndDateParameter=true">
      <control type="label" label="End Date"	 span="2"/>
      <control type="date" name="Report_EndDate" span="4" default="now" required="true"  />
    </row>
     <row name="rowStartDateTimeParameter" reveal="StartDateTimeParameter=true">
      <control type="label" label="Start Time"	 span="2"/>
      <control type="datetime" name="Report_StartDateTime" span="4" default="now" required="true"  />
    </row>
    <row name="rowEndDateTimeParameter" reveal="EndDateTimeParameter=true">
      <control type="label" label="End Time"	 span="2"/>
      <control type="datetime" name="Report_EndDateTime" span="4" default="now" required="true"  />
    </row>
    <row name="rowDepartmentParameter" reveal="DepartmentParameter=true">
      <control type="label" label="Department"			 span="2"/>
      <control type="select" name="Report_DepartmentGuid" span="7" 
        acctsvc="true"
        source="DepartmentName,DepartmentGuid"
        default="true" required="true" 
        datasource="GetDepartmentsActive"/>
    </row>
    <row name="rowPhysicianParameter" reveal="PhysicianParameter=true">
      <control type="label" label="Physician"			 span="2"/>     
      <control type="select" span="7"
            name="Report_PhysicianId" 
            searchable="true" required="true"
            edit="true" 
            explicit="true"
            acctsvc="true"
            source="FullName,UserId" 
            append="LocationId=(facilityData.LocationId),role=Physician"
            datasource="GetUsersByAttributes"/>     
    </row>
    <row name="rowUserParameter" reveal="UserParameter=true">
      <control type="label" label="User"		 span="2"/>
      <control type="select" name="Report_ReportUserId" span="7" 
          searchable="true" required="true" 
          source="FullName,UserId" 
          datasource="GetUsersForThisFacility" append="LocationId=(facilityData.LocationId)"/>
    </row>
    <row name="rowStartPeriodParameter" reveal="StartPeriodParameter=true">
      <control type="label" label="Start Period"	 span="2"/>
      <control type="select" name="Report_StartPeriod" span="4" required="true"
        source="24236,24237,24238,24239,24240,24241,24242,24243,24244,24245,24246,24247,24248,24249,24250,24251,24252,24253,24254,24255,24256,24257,24258,24259,24260,24261,24262,24263,24264,24265,24266,24267,24268,24269,24270,24271,24272,24273,24274,24275,24276,24277,24278,24279,24280,24281,24282,24283,24284,24285,24286,24287,24288,24289,24290,24291,24292,24293,24294,24295,24296,24297,24298,24299,24300"
        sourcelabels="August 2019,September 2019,October 2019,November 2019,December 2019,January 2020,February 2020,March 2020,April 2020,May 2020,June 2020,July 2020,August 2020,September 2020,October 2020,November 2020 ,December 2020,January 2021,February 2021,March 2021,April 2021,May 2021,June 2021,July 2021,August 2021,September 2021,October 2021,November 2021,December 2021,January 2022,February 2022,March 2022,April 2022,May 2022,June 2022,July 2022,August 2022,September 2022,October 2022,November 2022,December 2022,January 2023,February 2023,March 2023,April 2023,May 2023,June 2023,July 2023,August 2023,September 2023,October 2023,November 2023,December 2023,January 2024,February 2024,March 2024,April 2024,May 2024,June 2024,July 2024,August 2024,September 2024,October 2024,November 2024,December 2024,January 2025 ,February 2025,March 2025,April 2025,May 2025,June 2025,July 2025,August 2025,September 2025,October 2025,November 2025,December 2025 "/>
    </row>
    <row name="rowEndPeriodParameter" reveal="EndPeriodParameter=true">
      <control type="label" label="Start Period"	 span="2" />
      <control type="select" name="Report_EndPeriod" span="4" required="true"
        compare="»[Report_StartPeriod]"
        source="24236,24237,24238,24239,24240,24241,24242,24243,24244,24245,24246,24247,24248,24249,24250,24251,24252,24253,24254,24255,24256,24257,24258,24259,24260,24261,24262,24263,24264,24265,24266,24267,24268,24269,24270,24271,24272,24273,24274,24275,24276,24277,24278,24279,24280,24281,24282,24283,24284,24285,24286,24287,24288,24289,24290,24291,24292,24293,24294,24295,24296,24297,24298,24299,24300"
        sourcelabels="August 2019,September 2019,October 2019,November 2019,December 2019,January 2020,February 2020,March 2020,April 2020,May 2020,June 2020,July 2020,August 2020,September 2020,October 2020,November 2020 ,December 2020,January 2021,February 2021,March 2021,April 2021,May 2021,June 2021,July 2021,August 2021,September 2021,October 2021,November 2021,December 2021,January 2022,February 2022,March 2022,April 2022,May 2022,June 2022,July 2022,August 2022,September 2022,October 2022,November 2022,December 2022,January 2023,February 2023,March 2023,April 2023,May 2023,June 2023,July 2023,August 2023,September 2023,October 2023,November 2023,December 2023,January 2024,February 2024,March 2024,April 2024,May 2024,June 2024,July 2024,August 2024,September 2024,October 2024,November 2024,December 2024,January 2025 ,February 2025,March 2025,April 2025,May 2025,June 2025,July 2025,August 2025,September 2025,October 2025,November 2025,December 2025 "/>
    </row>
    <row name="rowLedgerAccountParameter" reveal="LedgerAccountParameter=true">
      <control type="label" label="Ledger Account"	 span="2"/>
      <control type="select" name="Report_LedgerAccountGuid" span="7" 
          searchable="true" required="true" 
          acctsvc="true"
          datasource="GetLedgerAccounts" 
          filter="Active=true" 
          source="AccountNumber|LongName,LedgerAccountGuid"/>
    </row>
  </group>
  <group name="grpReportButtons">
    <row>
      <control type="label" label=""	 span="1"/>
      <control type="button" name="btnCancelReportPrint"
        label="Cancel"	 span="2" color="3" action="close|new"
        size="large"/>
      <control type="button" 
        name="btnPrintReportFromModal" 
        action="print"
        mode="report" color="grey" span="3"
        label="Print"	 size="large" icon="print"
        capture="grpReportCriteria"
        append="id=[Report_ReportId],reportId=[Report_ReportId],FacilityId=(facility),UserName=(userName),CurrentDateTime=(dateTimeNow)"
        provoke="btnCancelReportPrint"/>
      <control type="button" 
        name="btnExportPDFFromModal" 
        action="export"
        mode="report" color="grey" span="2"
        label="PDF"		 size="large" icon="windows"
        capture="grpReportCriteria"
        append="id=[Report_ReportId],format=PDF,reportId=[Report_ReportId],FacilityId=(facility),UserName=(userName),CurrentDateTime=(dateTimeNow)"
        provoke="btnCancelReportPrint"/>
      <control type="button" 
        name="btnExportExcelFromModal" 
        action="export"
        mode="report" color="grey" span="2"
        label="Excel"		 size="large" icon="windows"
        capture="grpReportCriteria"
        append="id=[Report_ReportId],format=XLSX,reportId=[Report_ReportId],FacilityId=(facility),UserName=(userName),CurrentDateTime=(dateTimeNow)"
        provoke="btnCancelReportPrint"/>
      <control type="button" 
        name="btnExportWordFromModal" 
        action="export"
        mode="report" color="grey" span="2"
        label="DOCX"		 size="large" icon="windows"
        capture="grpReportCriteria"
        append="id=[Report_ReportId],format=DOCX,reportId=[Report_ReportId],FacilityId=(facility),UserName=(userName),CurrentDateTime=(dateTimeNow)"
        provoke="btnCancelReportPrint"/>
    </row>
  </group>
</section>
 
  </module>