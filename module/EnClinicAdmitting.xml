<?xml version="1.0" encoding="utf-8"?>
<module name="Clinic Admitting" type="onload" trigger="GetLastDepartment,GetLastCalendar">
  <facet name="CalendarOption" value="Admitting"/>
  <facet name="DefaultAdmitType" value="Outpatient"/>
  <facet name="FileName" value="ClinicAdmitting"/>
  <headerbutton name="btnReportsByType"
    icon="print" label="Informes"
    preset="Report_Type=Admitting"
    trigger="ReportList"
    action="redirect" target="mdlReports"/>
  <headerbutton name="btnConsultCalendar"
    icon="calendar" label="Consults"
    preset="DefaultPatientId=,DefaultOrderGuid="
    trigger="AppointmentTimes|resource,selProviderSearch"
    action="redirect" target="tabCalendarAppointments"/>
  <headerbutton name="btnLabCalendar"
    icon="calendar" label="Laboratory"
    preset="[MultipleLabCalendars]=false,DefaultPatientId=,DefaultOrderGuid="
    trigger="LabAppointmentTimes"
    action="redirect" target="mdlLabAppointments"/>
  <headerbutton name="btnImagingCalendar"
    icon="calendar" label="Imaging"
    preset="[MultipleImagingCalendars]=false,DefaultPatientId=,DefaultOrderGuid="
    trigger="ImgAppointmentTimes|resource"
    action="redirect" target="tabImagingAppointments"/>
  <headerbutton name="btnNursingCalendar"
    icon="calendar" label="Nursing"
    preset="[MultipleNursingCalendars]=false,DefaultPatientId=,DefaultOrderGuid="
    trigger="NurseAppointmentTimes|resource"
    action="redirect" target="tabNursingAppointments"/>
  <headerbutton name="btnEMTCalendar"
    icon="calendar" label="EMT"
    preset="[MultipleEMTCalendars]=false,DefaultPatientId=,DefaultOrderGuid="
    trigger="EMTAppointmentTimes|resource"
    action="redirect" target="tabEMTAppointments"/>
  <!-- Partial display a list of patients admitted to a department -->
	<partial link="Partials/PartialAdmittedPatientsByDepartment.xml"/>
  <!--Tabmodal window for admitting/reviewing patients-->
  <section type="tabmodal" badge="none" name="PatientTabModal" title="Patient Information"	 edit="false">
    <group name="AdmitGuidStorage" showif="never">
      <row>
        <!--Read the patient record and display-->
        <control type="hidden"
          name="PatientId"
          datarequest="GetPatientAllFields"
          appendrequest="PatientId=[PatientId]"
          inject="PatientInfo"
          provoke="Appointments"/>
      </row>
		</group>
    <!--Patient information-->
    <group name="PatientInfo">
			<columns>
				<column span="10">
					<partial link="Partials/PartialOutpatientInfo.xml"/>
				</column>
				<column span="2">
					<partial link="Partials/PartialOutpatientAdmitButtons.xml"/>
				</column>
			</columns>
		</group>
    <group name="VisitInfo" reveal="[PatientId]!">
      <columns>
        <column span="10">
          <partial link="Partials/PartialHospitalVisitInfo.xml"/>
        </column>
        <column span="2">
          <partial link="Partials/PartialHospitalVisitButtons.xml"/>
        </column>
      </columns>
    </group>
 <!-- Patient chart datagrids -->
    <group name="PatientGridGroup" reveal="[PatientId]!">
      <row>
        <control type="buttongroup" 
          name="ButtonGroupSelect" 
          edit="true" mode="auto" 
          source="Appointments,Contacts,Laboratory,Imaging,Documents" 
          span="12" 
          default="Appointments"  
          provoke="GridOptions,Appointments,Contacts,ERLabOrders,ERRadiologyOrders,ERRadiologyReports,EREcdForms,ScannedForms"/>
      </row>
      <row>
        <control type="options" name="GridOptions" affector="ButtonGroupSelect" span="12">
          <partial link="./EnPartial/Grids/PartialAppointmentListForPatientWithCalendars.xml"/>
          <partial link="./EnPartial/Grids/PartialInternalConsultRequestsForPatient.xml"/>
          <partial link="./EnPartial/Grids/PartialPatientContacts.xml"/>
          <partial link="./EnPartial/Grids/PartialDiagnosisHistoryForPatient.xml"/>
          <partial link="./EnPartial/Grids/PartialLabOrdersWithScannedResultsAndNew.xml"/>
          <partial link="./EnPartial/Grids/PartialImagingOrdersWithNewModal.xml"/>
          <partial link="./EnPartial/Grids/PartialPathologyReportsNewAndCancel.xml"/>
          <partial link="./EnPartial/Grids/PartialECDFormsWithNewEditAndCancelOnlyByUser.xml"/>
          <partial link="./EnPartial/Grids/PartialScannedDocumentsWithNewAndCancel.xml"/>
        </control>
      </row>
    </group>
  </section>
   <!-- Calendars -->
    <partial link="./EnPartial/Calendars/PartialCalendarPhysiciansAsResourcesAsTabModal.xml"/>
    <partial link="./EnPartial/Calendars/PartialCalendarLabAsModal.xml"/>
    <partial link="./EnPartial/Calendars/PartialCalendarNursingAsModal.xml"/>
    <partial link="./EnPartial/Calendars/PartialCalendarEMTAsModal.xml"/>
    <partial link="./EnPartial/Calendars/PartialCalendarImagingWithModalitiesAsModal.xml"/>
    <!-- Calendar Appointment modals -->
    <partial link="./EnPartial/Calendars/PartialCalendarLabAppointmentModal.xml"/>
    <partial link="./EnPartial/Calendars/PartialCalendarImagingAppointmentModal.xml"/>
    <partial link="./EnPartial/Calendars/PartialCalendarPhysiciansAppointmentModal.xml"/>
    <partial link="./EnPartial/Calendars/PartialCalendarNursingAppointmentModal.xml"/>
    <partial link="./EnPartial/Calendars/PartialCalendarEMTAppointmentModal.xml"/>
    <!-- General modals -->
		<partial link="./EnPartial/Beds/PartialClinicBedAssignment.xml"/>
		<partial link="./EnPartial/Move/PartialDischargePatient.xml"/>
  	<partial link="./EnPartial/Move/PartialMergePatients.xml"/>
    <partial link="./EnPartial/Admin/PartialPatientSearchModal.xml"/>
		<partial link="./EnPartial/Move/PartialTransferPatientWithBedAssignment.xml"/>
		<partial link="./EnPartial/Messaging/PartialSendTextMessageToPatient.xml"/>
		<partial link="./EnPartial/Messaging/PartialSendEmailMessageToPatient.xml"/>
    <partial link="./EnPartial/PartialCalendarNewAppointmentModal.xml"/>
    <partial link="./EnPartial/Admin/PartialReportModals.xml"/>
</module>